<?xml version="1.0" encoding="utf-8" standalone="no"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xl="http://www.w3.org/1999/xlink" label="PS3.10" version="5.0" xml:id="PS3.10">
  <title>PS3.10</title>
  <subtitle>DICOM PS3.10 2016c - Media Storage and File Format for Media Interchange</subtitle>
  <info>
    <author>
      <orgname>DICOM Standards Committee</orgname>
    </author>
    <copyright>
      <year>2016</year>
      <holder>NEMA</holder>
    </copyright>
  </info>
  <chapter label="" status="1" xml:id="chapter_Notice">
    <title>Notice and Disclaimer</title>
    <para xml:id="para_6583479f-c870-4f7b-ad99-c806e7d3498f">The information in this publication was considered technically sound by the consensus of
      persons engaged in the development and approval of the document at the time it was developed.
      Consensus does not necessarily mean that there is unanimous agreement among every person
      participating in the development of this document.</para>
    <para xml:id="para_558049df-352a-43a9-a96b-e93f316ca0d9">NEMA standards and guideline publications, of which the document contained herein is one,
      are developed through a voluntary consensus standards development process. This process brings
      together volunteers and/or seeks out the views of persons who have an interest in the topic
      covered by this publication. While NEMA administers the process and establishes rules to
      promote fairness in the development of consensus, it does not write the document and it does
      not independently test, evaluate, or verify the accuracy or completeness of any information or
      the soundness of any judgments contained in its standards and guideline publications.</para>
    <para xml:id="para_9b4e18ff-893a-4325-b0b3-ca0bc1adf24b">NEMA disclaims liability for any personal injury, property, or other damages of any nature
      whatsoever, whether special, indirect, consequential, or compensatory, directly or indirectly
      resulting from the publication, use of, application, or reliance on this document. NEMA
      disclaims and makes no guaranty or warranty, expressed or implied, as to the accuracy or
      completeness of any information published herein, and disclaims and makes no warranty that the
      information in this document will fulfill any of your particular purposes or needs. NEMA does
      not undertake to guarantee the performance of any individual manufacturer or seller's products
      or services by virtue of this standard or guide.</para>
    <para xml:id="para_09d5d5c1-1c00-4a36-96a8-b450c55941b9">In publishing and making this document available, NEMA is not undertaking to render
      professional or other services for or on behalf of any person or entity, nor is NEMA
      undertaking to perform any duty owed by any person or entity to someone else. Anyone using
      this document should rely on his or her own independent judgment or, as appropriate, seek the
      advice of a competent professional in determining the exercise of reasonable care in any given
      circumstances. Information and other standards on the topic covered by this publication may be
      available from other sources, which the user may wish to consult for additional views or
      information not covered by this publication.</para>
    <para xml:id="para_17d8b0e7-4235-441d-b95d-843021b1c023">NEMA has no power, nor does it undertake to police or enforce compliance with the contents
      of this document. NEMA does not certify, test, or inspect products, designs, or installations
      for safety or health purposes. Any certification or other statement of compliance with any
      health or safety-related information in this document shall not be attributable to NEMA and is
      solely the responsibility of the certifier or maker of the statement.</para>
  </chapter>
  <chapter label="" status="1" xml:id="chapter_Foreword">
    <title>Foreword</title>
    <para xml:id="para_257fca81-0098-45fc-a6b9-4211cecffacb">This DICOM Standard was developed according to the procedures of the DICOM Standards Committee.</para>
    <para xml:id="para_4a82de5e-27cd-4215-a7dd-47566638a191">The DICOM Standard is structured as a multi-part document using the guidelines established in <xref linkend="biblio_ISODirectives2"/>.</para>
    <para xml:id="para_d8960675-07c1-4e16-a409-2b3156f2e187">DICOM® is the registered trademark of the National Electrical Manufacturers Association for its standards publications relating to digital communications of medical information, all rights reserved.</para>
    <para xml:id="para_7838319f-c17b-4a8e-bfcb-3225a7cd8f90">HL7® and CDA® are the registered trademarks of Health Level Seven International, all rights reserved.</para>
    <para xml:id="para_bcae2e85-3d85-4a8f-8dea-1f74bb06db86">SNOMED®, SNOMED Clinical Terms®, SNOMED CT® are the registered trademarks of the International Health Terminology Standards Development <foreignphrase xml:lang="en-GB">Organisation</foreignphrase> (IHTSDO), all rights reserved.</para>
    <para xml:id="para_eaba6fcb-4e2c-4c14-b2c6-262104c7bbd9">LOINC® is the registered trademark of Regenstrief Institute, Inc, all rights reserved.</para>
  </chapter>
  <chapter label="1" status="1" xml:id="chapter_1">
    <title>Scope and Field of Application</title>
    <para xml:id="para_788aba96-4616-4e85-9aad-67c808475a3d">This Part of the DICOM Standard specifies a general model for the storage of Medical Imaging information on removable media. The purpose of this Part is to provide a framework allowing the interchange of various types of medical images and related information on a broad range of physical storage media.</para>
    <para xml:id="para_aed5fb64-d6c9-435b-8652-638fee14b255">This Part specifies:</para>
    <orderedlist numeration="loweralpha">
      <listitem>
        <para xml:id="para_9a2caa1c-7e44-4216-aa60-50198a338f79">a layered model for the storage of medical images and related information on storage media. This model introduces the concept of Media Storage Application Profiles, which specify application specific subsets of the DICOM Standard to which a Media Storage implementation may claim conformance. Such a conformance applies only to the writing, reading and updating of the content of storage media. Specific Application Profiles are not included in this Part but in <olink targetdoc="PS3.11" targetptr="PS3.11" xrefstyle="select: labelnumber"/>;</para>
      </listitem>
      <listitem>
        <para xml:id="para_bdb4d2ac-2da7-4fde-8fe6-18d492b69ca8">a DICOM File Format supporting the encapsulation of any Information Object Definition;</para>
      </listitem>
      <listitem>
        <para xml:id="para_dacc5209-2785-47ab-9d33-07441de9213a">a Secure DICOM File Format supporting the encapsulation of a DICOM File Format in a cryptographic envelope;</para>
      </listitem>
      <listitem>
        <para xml:id="para_e62bf446-b296-4e5d-9678-809bb8d98a1b">a DICOM File Service providing independence from the underlying media format and physical media. The policies specific to the DICOMDIR file used to store the Media Storage Directory Service/Object Pair Class are also addressed.</para>
      </listitem>
    </orderedlist>
    <para xml:id="para_bfb7df0b-5161-42d8-9fea-0eee8822c17a">This Part is related to other parts of the DICOM Standard in that:</para>
    <itemizedlist>
      <listitem>
        <para xml:id="para_a611d972-f843-43dd-8c40-85c0d2b8108d">
<olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>, Conformance, specifies the requirements that shall be met to achieve DICOM Conformance in Media Storage;</para>
      </listitem>
      <listitem>
        <para xml:id="para_a4d363fa-bdbc-4963-b66a-be0137cfff2d">
<olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>, Information Object Definitions, specifies a number of Information Object Definitions (e.g., various types of images) that may be used in conjunction with this part;</para>
      </listitem>
      <listitem>
        <para xml:id="para_03abf47d-f3d7-4ed5-9999-5882823a981d">
<olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/>, builds upon this part to define the Media Storage Service Class;</para>
      </listitem>
      <listitem>
        <para xml:id="para_528e9411-9a55-4be2-8e91-0c2a0f5a0839">
<olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>, Data Structure and Encoding, addresses the encoding rules necessary to construct a Data Set that is encapsulated in a file as specified in this part;</para>
      </listitem>
      <listitem>
        <para xml:id="para_8be47d8a-bb0e-4b62-a733-257de0da9299">
<olink targetdoc="PS3.6" targetptr="PS3.6" xrefstyle="select: labelnumber"/>, Data Dictionary, contains a registry by Tag of all Data Elements related to the Attributes of Information Objects defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. This index includes the Value Representation and Value Multiplicity for each Data Element;</para>
      </listitem>
      <listitem>
        <para xml:id="para_8fb09e22-702b-48f0-88b2-2df879ffa0f9">
<olink targetdoc="PS3.11" targetptr="PS3.11" xrefstyle="select: labelnumber"/>, Media Storage Application Profiles standardizes a number of choices related to a specific clinical need (selection of a Physical Medium and Media Format as well as specific Service/Object Pair Classes). It aims at facilitating the interoperability between implementations that claim conformance to the same Application Profile. <olink targetdoc="PS3.11" targetptr="PS3.11" xrefstyle="select: labelnumber"/> is intended to be extended as the clinical needs for Media Storage Interchange evolve;</para>
      </listitem>
      <listitem>
        <para xml:id="para_d7a429b8-b298-4959-852c-a34bbea1c6a4">
<olink targetdoc="PS3.12" targetptr="PS3.12" xrefstyle="select: labelnumber"/>, Media Formats and Physical Media for Data Interchange, defines a number of selected Physical Medium and corresponding Media Formats. These Media Formats and Physical Medium selections are referenced by one or more of the Application Profiles of <olink targetdoc="PS3.11" targetptr="PS3.11" xrefstyle="select: labelnumber"/>. <olink targetdoc="PS3.12" targetptr="PS3.12" xrefstyle="select: labelnumber"/> is intended to be extended as the technologies related to Physical Medium evolve.</para>
      </listitem>
      <listitem>
        <para xml:id="para_d69dd88d-639c-4aeb-b4ff-2f09db8fbb37">
<olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/>, Security Profiles defines a number of profiles for use with Secure DICOM Media Storage Application Profiles. The Media Storage Security Profiles specify the cryptographic techniques to be used for each Secure DICOM File in a Secure Media Storage Application Profile.</para>
      </listitem>
    </itemizedlist>
    <para xml:id="para_31ad1f7e-57f2-4295-9412-f9252ea2de0a">PS3.10 lays a foundation for open Media Interchange by standardizing an overall architecture and addressing some of the major barriers to interoperability: the definition of a DICOM File Format, a DICOM File Service and the policies associated with a Media Storage Directory structure.</para>
    <note>
      <para xml:id="para_315a9ce0-0ad0-4aa1-a4a4-32a7bf97f6b3">
<olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> specifies a general medical imaging Basic Directory Information Object Definition and <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/> specifies the corresponding Media Storage Directory SOP Class that is a member of the Media Storage Service Class.</para>
    </note>
    <para xml:id="para_8ae471cc-1689-423f-8cbd-183ccd678180">Adherence to the provisions of PS3.10 by implementations reading, writing or updating Storage Media represents a key foundation for open Storage Media Interchange. However, it is only with the selection of standard Physical Media and corresponding Media Formats in <olink targetdoc="PS3.12" targetptr="PS3.12" xrefstyle="select: labelnumber"/> and the use of specific Application Profiles in <olink targetdoc="PS3.11" targetptr="PS3.11" xrefstyle="select: labelnumber"/> that effective Media Storage Interchange interoperability is achieved. Therefore, claiming conformance to PS3.10 only, is not a valid DICOM Conformance Statement. DICOM Media Storage Conformance shall be made in relation to a <olink targetdoc="PS3.11" targetptr="PS3.11" xrefstyle="select: labelnumber"/> Application Profile according to the framework defined by <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
  </chapter>
  <chapter label="2" status="1" xml:id="chapter_2">
    <title>References</title>
    <section label="2.1" status="2" xml:id="sect_2.1">
      <title>Normative References</title>
      <para xml:id="para_2612bf49-a179-4def-8941-8848692dca1f">The following standards contain provisions that, through reference in this text, constitute provisions of this Standard. At the time of publication, the editions indicated were valid. All standards are subject to revision, and parties to agreements based on this Standard are encouraged to investigate the possibilities of applying the most recent editions of the standards indicated below.</para>
      <bibliography>
        <biblioentry xml:id="biblio_ISODirectives2">
          <abbrev>ISO/IEC Directives, Part 2</abbrev>
          <author>
            <orgname>ISO/IEC</orgname>
          </author>
          <date>2011/04</date>
          <edition>6.0</edition>
          <title>Rules for the structure and drafting of International Standards</title>
          <bibliosource>
            <link xl:href="http://www.iec.ch/members_experts/refdocs/iec/isoiec-dir2%7Bed6.0%7Den.pdf"/>
          </bibliosource>
        </biblioentry>
      </bibliography>
      <para xml:id="para_c6105f8c-c6e3-4611-8fb0-273e40320fea">ISO 7498-1, Information Processing Systems - Open Systems Interconnection - Basic Reference Model.</para>
      <para xml:id="para_a3b7a114-7571-43b2-a3f7-779bcb7c0a5d">ISO 7498-2, Information processing systems - Open Systems Interconnection - Basic reference Model - Part 2: Security Architecture</para>
      <para xml:id="para_2d54a21a-e3e0-4eea-8e06-148d09708a77">ISO/TR 8509, Information Processing Systems - Open Systems Interconnection - Service Conventions</para>
      <para xml:id="para_c06f580c-5653-4239-82d0-dcfae325b05d">ISO 8822, Information Processing Systems - Open Systems Interconnection - Connection-Oriented Presentation Service Definition.</para>
      <para xml:id="para_8186ef74-f9c0-42fd-bcfd-4b135316b397">ISO 8859, Information Processing - 8-bit single-byte coded graphic character sets - Part 1: Latin Alphabet No. 1</para>
      <para xml:id="para_fb74e0ae-581c-4d87-842c-623c3bd489f4">RFC3369, Cryptographic Message Syntax, August 2002</para>
      <para xml:id="para_0b262212-de3e-473b-84c2-dae4cc31be52">RFC2557 MIME Encapsulation of Aggregate Documents, such as HTML (MHTML)</para>
    </section>
  </chapter>
  <chapter label="3" status="1" xml:id="chapter_3">
    <title>Definitions</title>
    <para xml:id="para_2fa1de01-803f-4be0-a57a-25a28211a1ba">For the purposes of this Standard the following definitions apply.</para>
    <section label="3.1" status="2" xml:id="sect_3.1">
      <title>Reference Model Definitions</title>
      <para xml:id="para_e802e368-205e-4387-a637-103fc76a3c99">This Part of the Standard is based on the concepts developed in ISO 7498-1 and makes use of the following terms defined in it:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_5d9d4c74-2c04-4537-9a90-ea432ffb31cb">Application Entity;</para>
        </listitem>
        <listitem>
          <para xml:id="para_1af03c45-ea7c-4d45-95bd-e2224a1039ac">Application Process;</para>
        </listitem>
        <listitem>
          <para xml:id="para_519dbe26-31e4-47f5-9545-8bba3da18977">Service or Layer Service;</para>
        </listitem>
        <listitem>
          <para xml:id="para_ba887013-072c-4a3b-a4dc-d78820708488">Transfer Syntax.</para>
        </listitem>
      </orderedlist>
      <para xml:id="para_0bf2fa99-9fbd-4506-9e78-cb82d8c57ebd">This Part of the Standard makes use of the following terms defined in ISO 7498-2:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_f3376077-6a73-4676-ad69-275c18dc1be4">Data Confidentiality</para>
          <note>
            <para xml:id="para_106eef60-c410-424b-8ed8-b8388282f8ca">The definition is "the property that information is not made available or disclosed to unauthorized individuals, entities or processes."</para>
          </note>
        </listitem>
        <listitem>
          <para xml:id="para_3755ae53-a42f-4070-94a2-59a67bfca0cd">Data Origin Authentication</para>
          <note>
            <para xml:id="para_1da41521-5de8-423c-bfed-9155a76647f0">The definition is "the corroboration that the source of data received is as claimed."</para>
          </note>
        </listitem>
        <listitem>
          <para xml:id="para_700ae1d9-8345-45d6-b736-a94f93e8157c">Data Integrity</para>
          <note>
            <para xml:id="para_33fd3dc9-8abb-4f4d-8760-df0d2f0cd854">The definition is "the property that data has not been altered or destroyed in an unauthorized manner."</para>
          </note>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.2" status="2" xml:id="sect_3.2">
      <title>Service Conventions Definitions</title>
      <para xml:id="para_6b9738d2-5da0-4f33-9661-b6f2ba92f560">This Part of the Standard makes use of the following terms defined in ISO/TR 8509:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_256f134e-9520-442a-a512-42dfc6310637">Service Provider;</para>
        </listitem>
        <listitem>
          <para xml:id="para_883c030f-71f5-498a-b16f-397b0d414dd0">Service User.</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.3" status="2" xml:id="sect_3.3">
      <title>Presentation Service Definitions</title>
      <para xml:id="para_8d493469-b0a6-4c83-b263-143a2cb8a206">This Part of the Standard makes use of the following terms defined in ISO 8822:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_9059d848-65d3-4194-b708-a644dabfbfa1">Abstract Syntax;</para>
        </listitem>
        <listitem>
          <para xml:id="para_727dbfb7-2f06-4c8a-abb8-f2df69f7425a">Abstract Syntax Name.</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.4" status="2" xml:id="sect_3.4">
      <title>DICOM Introduction and Overview Definitions</title>
      <para xml:id="para_7a91b9e1-adc2-4f06-acb0-d0323dfed1ef">This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.1" targetptr="PS3.1" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_21dbe325-6851-4119-b7ed-09f6f2135179">Attribute.</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.5" status="2" xml:id="sect_3.5">
      <title>DICOM Information Object Definitions</title>
      <para xml:id="para_c93e7e2e-91ff-42d6-9098-88fd0a088f98">This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_4a92a3c3-6324-4180-beca-151b875b35d4">Information Object Definition.</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.6" status="2" xml:id="sect_3.6">
      <title>DICOM Data Structure and Encoding Definitions</title>
      <para xml:id="para_da581a0b-1dff-4bf8-b1ee-fb723863b3f8">This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_14d032ed-ad93-40f7-bcd6-da2d73bfbe72">Data Element;</para>
        </listitem>
        <listitem>
          <para xml:id="para_731f4d50-5dbc-4de9-aad6-a45a35102439">Data Set;</para>
        </listitem>
        <listitem>
          <para xml:id="para_5f4586aa-d0f9-4905-b211-2ad4594c2ccb">Data Element Type;</para>
        </listitem>
        <listitem>
          <para xml:id="para_6e658db6-afdc-4749-83a8-a89ab498dd0c">Value;</para>
        </listitem>
        <listitem>
          <para xml:id="para_97b4d05b-4bd2-4ab7-bd8d-2edf83b18f5f">Value Multiplicity;</para>
        </listitem>
        <listitem>
          <para xml:id="para_bc5f1197-14bf-41c0-9c08-eb167162e6e9">Value Representation;</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.7" status="2" xml:id="sect_3.7">
      <title>DICOM Message Exchange Definitions</title>
      <para xml:id="para_e31f2ca4-2c3f-4f00-a4a7-00ed4b48b77a">This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_36a44926-e123-410e-8943-367a986a1681">Service Object Pair (SOP) Class;</para>
        </listitem>
        <listitem>
          <para xml:id="para_e9080c4e-fa1e-4aea-bfbe-6434cfea5f9c">Service Object Pair (SOP) Instance;</para>
        </listitem>
        <listitem>
          <para xml:id="para_469425d2-6424-41ac-b7d7-c46f21c0150a">Implementation Class UID.</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.8" status="2" xml:id="sect_3.8">
      <title>DICOM Media Storage and File Format Definitions</title>
      <para xml:id="para_60261326-655b-4aa2-869c-8ac2736ccff3">The following definitions are commonly used in this Part of the Standard:</para>
      <variablelist>
        <varlistentry>
          <term>Application Profile</term>
          <listitem>
            <para xml:id="para_040c7f00-bd2d-47ab-8ee4-37fa80352544">A Media Storage Application Profile defines a selection of choices at the various layers of the DICOM Media Storage Model that are applicable to a specific need or context in which the media interchange is intended to be performed.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>DICOM File Service</term>
          <listitem>
            <para xml:id="para_306787f3-0546-4888-9c98-28ed5b254403">The DICOM File Service specifies a minimum abstract view of files to be provided by the Media Format Layer. Constraining access to the content of files by the Application Entities through such a DICOM File Service boundary ensures Media Format and Physical Media independence.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>DICOM File</term>
          <listitem>
            <para xml:id="para_b0cb0376-4488-4dd3-b4b9-ffd3f9c9fd2a">A DICOM File is a File with a content formatted according to the requirements of this Part of the DICOM Standard. In particular such files shall contain, the File Meta Information and a properly formatted Data Set.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>DICOMDIR File</term>
          <listitem>
            <para xml:id="para_a2ad3343-175c-45f6-8df2-737c1657ecaa">A unique and mandatory DICOM File within a File-set that contains the Media Storage Directory SOP Class. This File is given a single component File ID, DICOMDIR.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>File</term>
          <listitem>
            <para xml:id="para_7b444be5-755a-4991-9089-16c9e252db37">A File is an ordered string of zero or more bytes, where the first byte is at the beginning of the file and the last byte at the end of the File. Files are identified by a unique File ID and may by written, read and/or deleted.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>File ID</term>
          <listitem>
            <para xml:id="para_37c0824b-1b72-4e7c-bd90-24da50b3afd2">Files are identified by a File ID that is unique within the context of the File-set they belong to. A set of ordered File ID Components (up to a maximum of eight) forms a File ID.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>File ID Component</term>
          <listitem>
            <para xml:id="para_e7c59d09-bd65-47bf-93bc-cc9324abf611">A string of one to eight characters of a defined character set.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>File Meta Information</term>
          <listitem>
            <para xml:id="para_27b5e58c-9676-43c0-9e2f-0dee87357fa2">The File Meta Information includes identifying information on the encapsulated Data Set. It is a mandatory header at the beginning of every DICOM File.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>File-set</term>
          <listitem>
            <para xml:id="para_d573dbcf-2d4f-4727-b7e0-023f39cfb552">A File-set is a collection of DICOM Files (and possibly non-DICOM Files) that share a common naming space within which File IDs are unique.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>File-set Creator</term>
          <listitem>
            <para xml:id="para_be0f41b7-e0a7-448a-a40c-ec0d80b25394">An Application Entity that creates the DICOMDIR File (see <xref linkend="sect_8.6" xrefstyle="select: label"/>) and zero or more DICOM Files.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>File-set Reader</term>
          <listitem>
            <para xml:id="para_6db81891-da88-4303-bd0b-802391c8623c">An Application Entity that accesses one or more files in a File-set.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>File-set Updater</term>
          <listitem>
            <para xml:id="para_43595296-9304-44bf-9e57-65a022942be1">An Application Entity that accesses Files, creates additional Files, or deletes existing Files in a File-set. A File-set Updater makes the appropriate alterations to the DICOMDIR file reflecting the additions or deletions.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>DICOM File Format</term>
          <listitem>
            <para xml:id="para_977fbd77-369a-4574-b075-0b96c1063144">The DICOM File Format provides a means to encapsulate in a File the Data Set representing a SOP Instance related to a DICOM Information Object.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Media Format</term>
          <listitem>
            <para xml:id="para_4b0efb9b-18e3-4800-9bc4-6539fdd63ec0">Data structures and associated policies that organize the bit streams defined by the Physical Media format into data file structures and associated file directories.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Media Storage Model</term>
          <listitem>
            <para xml:id="para_16821291-27a4-4096-aba8-1dbac90bb209">The DICOM Media Storage Model pertains to the data structures used at different layers to achieve interoperability through media interchange.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Media Storage Services</term>
          <listitem>
            <para xml:id="para_0b007008-9d0e-4ced-9695-03fe28245027">DICOM Media Storage Services define a set of operations with media that facilitate storage to and retrieval from the media of DICOM SOP Instances.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Physical Media</term>
          <listitem>
            <para xml:id="para_cbdc04f9-2f6e-4d26-a319-ee2ae5c533f8">A piece of material with recording capabilities for streams of bits. Characteristics of a Physical Media include form factor, mechanical characteristics, recording properties and rules for recording and organizing bit streams in accessible structures</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Secure DICOM File</term>
          <listitem>
            <para xml:id="para_4edcdb27-907e-43c6-b05e-d3ab565f1f73">A DICOM File that is encapsulated with the Cryptographic Message Syntax specified in RFC2630.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Secure File-set</term>
          <listitem>
            <para xml:id="para_9ef978af-b0d5-4455-bc41-0010cda00957">A File-set in which all DICOM Files are Secure DICOM Files.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Secure Media Storage Application Profile</term>
          <listitem>
            <para xml:id="para_97ffe0d0-8143-42c8-9546-43cf491f872b">A DICOM Media Storage Application Profile that requires a Secure File-set.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </chapter>
  <chapter label="4" status="1" xml:id="chapter_4">
    <title>Symbols and Abbreviations</title>
    <para xml:id="para_d1d40041-3fb2-473e-981a-56ee8fc8667c">The following symbols and abbreviations are used in this Part of the Standard.</para>
    <variablelist>
      <varlistentry>
        <term>ACC</term>
        <listitem>
          <para xml:id="para_9838c3a8-49e7-4764-97be-ea033aac09a7">American College of Cardiology</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>ACR</term>
        <listitem>
          <para xml:id="para_630a5822-584a-47af-974f-19e9b2f3566c">American College of Radiology</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>ASCII</term>
        <listitem>
          <para xml:id="para_8f73f43f-fc8a-450d-8608-f94da499a630">American Standard Code for Information Interchange</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>AE</term>
        <listitem>
          <para xml:id="para_70ebcfaf-4606-4455-9d27-96218afb269e">Application Entity</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>ANSI</term>
        <listitem>
          <para xml:id="para_e0eb9807-2483-40a3-be8d-cd7cf0fb8e57">American National Standards Institute</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>CEN/TC/251</term>
        <listitem>
          <para xml:id="para_be3232f2-2736-4861-9dee-42d6ddf61962">Comite Europeen de Normalisation - Technical Committee 251 - Medical Informatics</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>DICOM</term>
        <listitem>
          <para xml:id="para_e5d87dac-faaf-47fa-9334-90227ca73721">Digital Imaging and Communications in Medicine</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>FSC</term>
        <listitem>
          <para xml:id="para_48ed17bb-8efb-4d84-8c1a-43ca73175dd0">File-set Creator</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>FSR</term>
        <listitem>
          <para xml:id="para_dc31130e-2496-4b35-8516-3da8bb7200fe">File-set Reader</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>FSU</term>
        <listitem>
          <para xml:id="para_ae956684-4f95-4861-8e5c-d3c9292d3b11">File-set Updater</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>HL7</term>
        <listitem>
          <para xml:id="para_673cf350-8c62-4903-bc90-bd56cea7f0d3">Health Level 7</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>HTML</term>
        <listitem>
          <para xml:id="para_86826d64-3e2f-4591-ba44-a1aa690bf6a7">Hypertext Transfer Markup Language</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>IEEE</term>
        <listitem>
          <para xml:id="para_ebd78ce7-7abd-4dfe-bf6c-62f99d70bb37">Institute of Electrical and Electronics Engineers</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>ISO</term>
        <listitem>
          <para xml:id="para_bb4428bf-edc1-43fa-a709-7ec43d7f4991">International Standards Organization</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>ID</term>
        <listitem>
          <para xml:id="para_9f53a974-835b-40b1-8963-f323feaa89d8">Identifier</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>IOD</term>
        <listitem>
          <para xml:id="para_ba080538-6933-4397-8a65-8845fecca6d1">Information Object Definition</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>JIRA</term>
        <listitem>
          <para xml:id="para_6792906b-b675-4584-ac1d-96374c4e5634">Japan Medical Imaging and Radiological Systems Industries Association</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>MIME</term>
        <listitem>
          <para xml:id="para_a6b7bee9-a550-4889-8a49-714b80e83f2e">Multipurpose Internet Mail Extensions</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>NEMA</term>
        <listitem>
          <para xml:id="para_59303eca-24f7-4e70-9f52-faa43e314011">National Electrical Manufacturers Association</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>OSI</term>
        <listitem>
          <para xml:id="para_12fc6cb5-02af-4b95-a8e6-3dc7cadc1eb1">Open Systems Interconnection</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>SOP</term>
        <listitem>
          <para xml:id="para_7fd0fe8c-f32f-419e-8435-a65601a5ff99">Service-Object Pair</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>TCP/IP</term>
        <listitem>
          <para xml:id="para_d3de499b-2393-47e0-a674-5b934f9b36ea">Transmission Control Protocol/Internet Protocol</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>UID</term>
        <listitem>
          <para xml:id="para_abeb545b-1ef1-42ef-a2dc-f802162c157e">Unique Identifier</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>VR</term>
        <listitem>
          <para xml:id="para_0707908a-7038-45e9-8acd-7f3e36d452ed">Value Representation</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>XML</term>
        <listitem>
          <para xml:id="para_137d8de2-25cb-4685-8afc-fa1bb06ff6d2">Extensible Markup Language</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </chapter>
  <chapter label="5" status="1" xml:id="chapter_5">
    <title>Conventions</title>
    <para xml:id="para_6fe9de86-249a-4dc2-94bb-87df64c796bd">Words are capitalized in this document to help the reader understand that these words have been previously defined in Section 3 of this document and are to be interpreted with that meaning.</para>
    <para xml:id="para_8e5868d4-1090-44b7-8a5b-112f5cebc8df">A Tag is represented as (gggg,eeee), where gggg equates to the Group Number and eeee equates to the Element Number within that Group. Tags are represented in hexadecimal notation as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
    <para xml:id="para_5d2db422-622c-4de8-b8f6-8b2350a76117">Attributes of File Meta Information are assigned a Type that indicates if a specific Attribute is required depending on the Media Storage Services. The following Type designations are derived from the <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> designations but take into account the Media Storage environment:</para>
    <itemizedlist>
      <listitem>
        <para xml:id="para_9ab72010-fe25-4a2c-90a5-23dd4e50157d">Type 1: Such Attributes shall be present with an explicit Value in files created by File-set Creators and File-set Updaters. They shall be supported by File-set Readers and File-set Updaters;</para>
      </listitem>
      <listitem>
        <para xml:id="para_b8609c51-4ebd-4345-9122-4a850f2de22e">Type 1C: Such Attributes shall be present with an explicit Value in Files created by File-set Creators and File-set Updaters if the specified condition is met. They shall be supported by File-set Readers and File-set Updaters;</para>
      </listitem>
      <listitem>
        <para xml:id="para_3a68ab5c-df21-4803-a419-d8eca84e6920">Type 2: Such Attributes shall be present with an explicit Value or with a zero-length Value if unknown, in Files created by File-set Creators and File-set Updaters. They shall be supported by File-set Readers and File-set Updaters;</para>
      </listitem>
      <listitem>
        <para xml:id="para_3b8b279c-fd40-4153-88ef-2140db7165de">Type 2C: Such Attributes shall be present with an explicit Value or with a zero-length if unknown, in Files created by File-set Creators and File-set Updaters if the specified condition is met. They shall be supported by File-set Readers and File-set Updaters;</para>
      </listitem>
      <listitem>
        <para xml:id="para_e7d08729-75c8-4ac5-93c9-cc617aab3fbb">Type 3: Such Attributes may be present with an explicit Value or a zero-length Value in Files created by File-set Creators and File-set Updaters. They may be supported or ignored by File-set Readers and File-set Updaters.</para>
      </listitem>
    </itemizedlist>
  </chapter>
  <chapter label="6" status="1" xml:id="chapter_6">
    <title>DICOM Models for Media Storage</title>
    <para xml:id="para_87254ebc-abb6-4999-9374-fd720d312ff3">This section defines the DICOM Media Storage Model used by DICOM Application Entities for the purpose of communication through the interchange of removable storage media. Specifically, this Section provides a model to clarify a number of concepts for digital imaging and communications and introduces key terms used throughout the DICOM Standard. This model has been used to partition the DICOM Standard into separate parts related to storage media interchange.</para>
    <section label="6.1" status="2" xml:id="sect_6.1">
      <title>General DICOM Communication Model</title>
      <para xml:id="para_73a08d0d-fc28-4631-a71c-67795d51019f">
<xref linkend="figure_6.1-1" xrefstyle="select: label"/> presents the general communication model of DICOM that spans network and storage media interchange communications. The DICOM Application Entities may rely on either one of the following boundaries:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_0acd52b6-4e58-4cab-9e71-5169092fea1c">the OSI Upper Layer Service, which provides independence from specific physical networking communication support</para>
        </listitem>
        <listitem>
          <para xml:id="para_d4f51692-5c40-4063-ae3c-24d15ed34997">the DICOM File Service, which provides access to Storage Media independently from specific physical media storage formats and file structures.</para>
        </listitem>
      </orderedlist>
      <para xml:id="para_76f67907-a041-4cec-a0e1-fc32eddc5f8e">
        <figure label="6.1-1" pgwide="1" xml:id="figure_6.1-1">
          <title>General DICOM Communication Model</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="figures/PS3.10_6.1-1.svg"/>
              <!--<imagedata fileref="part10_fromword_files/image002.png"/>-->
            </imageobject>
          </mediaobject>
        </figure>
      </para>
    </section>
    <section label="6.2" status="2" xml:id="sect_6.2">
      <title>The DICOM Media Storage Model</title>
      <para xml:id="para_d4199e6a-5388-47ae-b033-1cfeac63f01c">The DICOM Media Storage Model is presented by <xref linkend="figure_6.2-1" xrefstyle="select: label"/> and expands on the General DICOM Communication Model introduced earlier in <xref linkend="sect_6.1" xrefstyle="select: label"/>.</para>
      <para xml:id="para_a5ef9357-91b4-41b5-bd27-a12c94974656">The DICOM Media Storage Model focuses on the aspects directly related to data interchange through removable storage media. It pertains to the data structures and associated rules used at different layers to achieve interoperability through media interchange. The Services identified in this Model are simple boundaries between functional layers.</para>
      <note>
        <para xml:id="para_0d12d138-5270-432f-84a9-b009dab23e58">It is not within the scope of this Standard to specify Application Programming Interfaces at these boundaries.</para>
      </note>
      <para xml:id="para_e8023213-7e6d-4900-b017-1a66161c640c">
        <figure label="6.2-1" pgwide="1" xml:id="figure_6.2-1">
          <title>DICOM Media Storage Model</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="figures/PS3.10_6.2-1.svg"/>
              <!--<imagedata fileref="part10_fromword_files/image004.png"/>-->
            </imageobject>
          </mediaobject>
        </figure>
      </para>
      <para xml:id="para_cf4fe87d-6b76-45d5-b76b-f921b4e316d8">The DICOM Media Storage Model includes three layers, which are described in the following sections.</para>
      <section label="6.2.1" status="3" xml:id="sect_6.2.1">
        <title>Physical Media Layer</title>
        <para xml:id="para_cbffa89c-a58b-44c2-825c-d6dab5b879ef">Physical media characteristics are defined at the Physical Media Layer. Such characteristics include the physical media form factor, dimension, mechanical characteristics and recording properties. This Layer also defines the organization and grouping of the recorded bits.</para>
        <note>
          <orderedlist>
            <listitem>
              <para xml:id="para_7ae8c216-5937-46af-a684-9a89d5cde150">An example of a Physical Media Layer in the personal computer environment is the 3 1/2 inch floppy disk, double sided, high density.</para>
            </listitem>
            <listitem>
              <para xml:id="para_769cfc7d-989e-4c3b-bbeb-5a21ffd14caf">The specification of one or more specific Physical Media for a given application is beyond the scope of this Part of the DICOM Standard. <olink targetdoc="PS3.12" targetptr="PS3.12" xrefstyle="select: labelnumber"/> and its annexes specify several Physical Media choices. <olink targetdoc="PS3.11" targetptr="PS3.11" xrefstyle="select: labelnumber"/> defines a number of Application Profiles that select specific Physical Media depending on the requirements of specific medical imaging applications.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
      <section label="6.2.2" status="3" xml:id="sect_6.2.2">
        <title>Media Format Layer</title>
        <para xml:id="para_0015e07d-6a9f-46bf-b45a-caf26a47c112">At the Media Format Layer, Physical Media bit streams are organized into specific structures. Data file structures and associated directory structures are defined to allow efficient access and management of the physical media space.</para>
        <note>
          <para xml:id="para_3ee31a79-0da9-4c37-91e2-a4bf5742af50">This layer is often specific to a given operating system environment. An example of such a Media Format Layer definition associated with the 3 1/2 inch floppy disk are the data structures used by the operating systems of various personal computer file systems. <olink targetdoc="PS3.12" targetptr="PS3.12" xrefstyle="select: labelnumber"/> and its annexes specify several Media Format choices.</para>
        </note>
        <para xml:id="para_971b8186-134b-42c6-b9dd-2fe8a4f945df">Media Formats supported by the DICOM Standard are selected to support the minimum requirements specified by the DICOM File Service as specified in Section 8 of this Part. Constraining access to the File content through such a DICOM File Service ensures that the DICOM Data Format Layer is independent from Media Format and Physical Media selection.</para>
      </section>
      <section label="6.2.3" status="3" xml:id="sect_6.2.3">
        <title>DICOM Data Format Layer</title>
        <para xml:id="para_1d35f73f-e9b1-4105-830a-ee806a929942">The DICOM Data Format Layer includes four elements of specification:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para xml:id="para_3c1dbc59-31b6-41ea-af39-cabcb5cb2add">DICOM Media Storage SOP Classes and associated Information Object Definitions;</para>
          </listitem>
          <listitem>
            <para xml:id="para_4157c946-9cfb-47ad-8554-2bc720986346">The DICOM File Format;</para>
          </listitem>
          <listitem>
            <para xml:id="para_13f1d945-bd13-4b3e-a4f0-0bffef9e8504">The Secure DICOM File Format;</para>
          </listitem>
          <listitem>
            <para xml:id="para_e46d88a7-a1ce-4bcc-a70a-f88c7a9476e2">The DICOM Media Storage Directory SOP Class;</para>
          </listitem>
          <listitem>
            <para xml:id="para_282be212-1264-4eb4-b5cf-b0acfc16feb3">DICOM Media Storage Application Profiles;</para>
          </listitem>
          <listitem>
            <para xml:id="para_410ee18b-602d-457c-8b81-71db4f59a408">DICOM Security Profiles for Media Storage.</para>
          </listitem>
        </orderedlist>
        <section label="6.2.3.1" status="4" xml:id="sect_6.2.3.1">
          <title>DICOM SOP Classes</title>
          <para xml:id="para_eda15173-ba18-43ee-98dd-c3c2047ffe00">DICOM SOP Classes and associated Information Object Definitions (IODs) are used to convey specific medical imaging information at the Data Format Layer. SOP Classes and IODs used for Media Storage shall follow the framework established in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> and <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/>. Examples of such IODs are modality images, patient information, results, etc.</para>
          <para xml:id="para_78d103d5-24d5-48e4-a1f6-df74e9b70411">The use of DICOM IODs in conjunction with Media Storage Services forms a number of Media Storage Service Object Pair Classes or SOP Classes. Media Storage Services (e.g., read, write, delete, etc.) shall be performed through the DICOM File Service. The content of the resulting DICOM Files shall be formatted according to the DICOM File Format as specified below.</para>
          <note>
            <orderedlist>
              <listitem>
                <para xml:id="para_256fd490-31a1-444d-b754-2e9e06388716">The concept of a SOP Class in the Media Storage context is equivalent to the concept of SOP Class introduced in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> and <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/> for network related operations (DIMSE Operations).</para>
              </listitem>
              <listitem>
                <para xml:id="para_cf1351ae-9fb5-42b5-9dfc-c93a66b1edf4">Both Composite and Normalized IODs and SOP Classes may be used in the Media Storage context.</para>
              </listitem>
            </orderedlist>
          </note>
          <para xml:id="para_d52b2b10-d680-4eda-a7ea-a7a8e8053459">
<olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/> defines a number of SOP Classes that may be used for Media Storage. These SOP Classes are based on DICOM Standard IODs that may be found in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
          <para xml:id="para_8728f49f-de73-48b7-8db1-78874eaca02f">The structure and encoding of a Data Set representing the data associated with a SOP Class shall follow <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>. The specification of Transfer Syntaxes that may be used to encode such a Data Set, is also defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
        </section>
        <section label="6.2.3.2" status="4" xml:id="sect_6.2.3.2">
          <title>Concept of the DICOM File Format</title>
          <para xml:id="para_362102dc-8f69-4d8b-9c5c-adcee210db56">The encapsulation of a DICOM Data Set in a File shall follow the specifications of Section 7 of this Part. These encapsulation rules define a DICOM File Format able to contain in a File any DICOM Data set. Files are identified by File IDs. No semantics shall be inferred from these File IDs, nor from their structure.</para>
          <note>
            <para xml:id="para_f72fea34-29ad-498b-9a17-e2fdb8524370">A medical imaging application acting as a creator of a DICOM File may use semantic information to generate a File ID, but readers of DICOM files should not rely on apparent semantic content of a File ID.</para>
          </note>
          <para xml:id="para_27a21faa-24da-431a-b881-8524df5414a4">Data Set encapsulation shall be based on the DICOM File Service as specified in Section 8 of this Part.</para>
          <note>
            <para xml:id="para_44d32bea-6324-4ae8-ae79-d7956c771c42">It is acceptable that a specific Media Format offers more file services than those specified in the DICOM File Service. Such services may be local or internal to an implementation. Their usage is beyond the scope of the DICOM Standard. However, in cases where such services are reflected in the file structures of the Media format Layer or in the Data Set encoding of an Information Object, the extension of such services in a manner that jeopardizes interoperability should not be done (e.g., File IDs longer than those specified in the DICOM File Service).</para>
          </note>
          <para xml:id="para_42d334a0-3973-48cb-b324-e4d59334f4c2">The encapsulation of a DICOM File in a Secure DICOM File shall follow the specifications of <xref linkend="sect_7.4" xrefstyle="select: label"/> of this Part. These encapsulation rules define a mechanism for creating a Secure DICOM File by encapsulating an unprotected DICOM File as payload within a secure envelope.</para>
        </section>
        <section label="6.2.3.3" status="4" xml:id="sect_6.2.3.3">
          <title>DICOM Medical Information Directory</title>
          <para xml:id="para_14a66f9c-caa7-463d-b53c-52625f5ae8c9">In addition to the DICOM Image and Image related SOP Classes (e.g., results, patients) other SOP Classes tailored for media storage may be used to provide references (or directories) based on medical information, thus facilitating access to the clinical imaging information. Such a SOP Class is the Media Storage Directory SOP Class as defined in <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/>. Instances of this SOP Class are conveyed in the File with a File ID of DICOMDIR.</para>
        </section>
      </section>
      <section label="6.2.4" status="3" xml:id="sect_6.2.4">
        <title>DICOM Media Storage Application Profiles</title>
        <para xml:id="para_45795d54-34df-4643-88d2-c8cefaae7626">A Media Storage Application Profile defines a selection of choices at the various layers of the DICOM Media Storage Model that are applicable to a specific need or context in which the media interchange is intended to be performed. Such choices are formally specified as a Media Storage Application Profile in order to ensure interoperability between implementations conforming to the same Media Storage Application Profile. It facilitates conformance statements that allow users to assess interoperability of different implementations.</para>
        <para xml:id="para_427192d3-b3f5-460d-a3a0-777a6fbd2df4">Media Storage Application Profiles shall include:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para xml:id="para_89583f28-735e-40ef-a8cc-6df1bdb1cc21">The description of the need addressed by the Application Profile (e.g., cardiac, echography, angiography) and its context of application;</para>
          </listitem>
          <listitem>
            <para xml:id="para_d1a1aeb0-e23a-4507-9177-5f623c7f4eee">The selection, at the Data Format Layer, of a number of specific IODs and associated SOP Classes. For standard DICOM SOP Classes, this shall be done by reference to <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/>. These SOP Classes, like any other DICOM SOP Classes are assigned a unique registered UID. For each SOP Class it shall be stated if its support is required or optional within the context of this profile;</para>
          </listitem>
          <listitem>
            <para xml:id="para_3dc3f394-ab0f-45d9-9681-cfecacb1c983">The selection of a specific Media Format definition. This is done by reference to <olink targetdoc="PS3.12" targetptr="PS3.12" xrefstyle="select: labelnumber"/> that specify the selected Physical Medium, a specific associated Media Format and the mapping of this Media Format (or file system) services onto the DICOM File Service;</para>
          </listitem>
          <listitem>
            <para xml:id="para_02eab991-7656-4890-85c8-beb7c7f3fbb3">The selection of appropriate Transfer Syntaxes;</para>
          </listitem>
          <listitem>
            <para xml:id="para_9660ffb0-6d8b-4267-b829-dd513191d33e">The selection of a specific Security Profile. This is done by reference to <olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/> that specifies the cryptographic algorithms to be used to encapsulate the DICOM Files of the DICOM File Set into Secure DICOM Files. If a Media Storage Application Profile selects no Security Profile, then the Application Profile is unsecure and the Secure DICOM File Format shall not be used with that Application Profile;</para>
          </listitem>
          <listitem>
            <para xml:id="para_d07d453a-3daf-432c-88a8-8d4a36329242">Other choices facilitating interoperability such as specific limits (e.g., maximum file sizes, if necessary, support of options, if any).</para>
          </listitem>
        </orderedlist>
        <para xml:id="para_763fc8be-5a8a-4937-88e6-d315d70c5f61">The complete definition and structure of a Media Storage Application Profiles is specified by <olink targetdoc="PS3.11" targetptr="PS3.11" xrefstyle="select: labelnumber"/>. A number of Standard Application Profiles corresponding to different needs are included in <olink targetdoc="PS3.11" targetptr="PS3.11" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="6.2.5" status="3" xml:id="sect_6.2.5">
        <title>Media Storage and The DICOM Standard Structure</title>
        <para xml:id="para_45850a82-4a85-4569-a433-fd63b0ca9d18">
<xref linkend="figure_6.2-2" xrefstyle="select: label"/> provides an overview of the relationship between the functional areas identified by the DICOM Media Storage Model introduced in <xref linkend="sect_6.2" xrefstyle="select: label"/> and the various Parts of the DICOM Standard related to Media Storage. A number of Parts of the DICOM Standard are common between Network Communication and Media Interchange.</para>
        <para xml:id="para_5e11dc2e-70a1-4bdc-94d4-b3173099393e">
          <figure label="6.2-2" pgwide="1" xml:id="figure_6.2-2">
            <title>Media Storage and DICOM Parts</title>
            <mediaobject>
              <imageobject>
                <imagedata fileref="figures/PS3.10_6.2-2.svg"/>
                <!--<imagedata fileref="part10_fromword_files/image006.png"/>-->
              </imageobject>
            </mediaobject>
          </figure>
        </para>
      </section>
    </section>
  </chapter>
  <chapter label="7" status="1" xml:id="chapter_7">
    <title>DICOM File Format</title>
    <para xml:id="para_20a40f95-db99-43d6-ac1d-c63412d72673">The DICOM File Format provides a means to encapsulate in a file the Data Set representing a SOP Instance related to a DICOM IOD. As shown in <xref linkend="figure_7-1" xrefstyle="select: label"/>, the byte stream of the Data Set is placed into the file after the DICOM File Meta Information. Each file contains a single SOP Instance.</para>
    <para xml:id="para_34c02ea0-bd30-42e2-9944-159999d30521">
      <figure label="7-1" pgwide="1" xml:id="figure_7-1">
        <title>File-set and File Format</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/PS3.10_7-1.svg"/>
            <!--<imagedata fileref="part10_fromword_files/image008.png"/>-->
          </imageobject>
        </mediaobject>
      </figure>
    </para>
    <section label="7.1" status="2" xml:id="sect_7.1">
      <title>DICOM File Meta Information</title>
      <para xml:id="para_65675971-1779-4685-b9f3-4fb4b09fadab">The File Meta Information includes identifying information on the encapsulated Data Set. This header consists of a 128 byte File Preamble, followed by a 4 byte DICOM prefix, followed by the File Meta Elements shown in <xref linkend="table_7.1-1" xrefstyle="select: label"/>. This header shall be present in every DICOM file.</para>
      <para xml:id="para_2125010b-29b3-49e9-807a-cb7a381c9261">The File Preamble is available for use as defined by Application Profiles or specific implementations. This Part of the DICOM Standard does not require any structure for this fixed size Preamble. It is not required to be structured as a DICOM Data Element with a Tag and a Length. It is intended to facilitate access to the images and other data in the DICOM file by providing compatibility with a number of commonly used computer image file formats. Whether or not the File Preamble contains information, the DICOM File content shall conform to the requirements of this Part and the Data Set shall conform to the SOP Class specified in the File Meta Information.</para>
      <note>
        <orderedlist>
          <listitem>
            <para xml:id="para_1f6e44eb-2657-44a8-a4a6-de157169d1f3">If the File Preamble is not used by an Application Profile or a specific implementation, all 128 bytes shall be set to 00H. This is intended to facilitate the recognition that the Preamble is used when all 128 bytes are not set as specified above.</para>
          </listitem>
          <listitem>
            <para xml:id="para_97ee1c90-3aeb-485d-85bf-426aaf090113">The File Preamble may for example contain information enabling a multi-media application to randomly access images stored in a DICOM Data Set. The same file can be accessed in two ways: by a multi-media application using the preamble and by a DICOM Application that ignores the preamble.</para>
          </listitem>
        </orderedlist>
      </note>
      <para xml:id="para_fb0526d1-1b42-4ab7-8b73-b6f38a8beb96">The four byte DICOM Prefix shall contain the character string "DICM" encoded as uppercase characters of the ISO 8859 G0 Character Repertoire. This four byte prefix is not structured as a DICOM Data Element with a Tag and a Length.</para>
      <para xml:id="para_0dcbd575-940e-4e45-8161-4cf1cb61e478">The Preamble and Prefix are followed by a set of DICOM Meta Elements with Tags and Lengths as defined in <xref linkend="table_7.1-1" xrefstyle="select: label"/>.</para>
      <table frame="box" label="7.1-1" rules="all" xml:id="table_7.1-1">
        <caption>DICOM File Meta Information</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_178a21be-0987-43bd-a566-ff5fa3cb1822">Attribute Name</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_e78be6a8-0c96-449f-a1ad-75403bdc5b4d">Tag</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_c0182397-da2d-496a-826c-4d235e82e9fd">Type</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_dd837042-c20f-4e01-b884-b1b91f2f70dd">Attribute Description</para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_c70e2db7-2ffb-4e6a-afec-f5d06cd71291">File Preamble</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_0f1587aa-e69d-42b5-be59-8c3b0d899434">
<emphasis role="italic">No Tag or Length Fields</emphasis>
</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_74012343-0f19-4c89-998b-c0e1c55661ec">1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_0c702bc8-14b0-4272-94dc-49e6fd819cbd">A fixed 128 byte field available for Application Profile or implementation specified use. If not used by an Application Profile or a specific implementation all bytes shall be set to 00H.</para>
              <para xml:id="para_c699c525-dd7a-4cf5-add2-714df23551ed">File-set Readers or Updaters shall not rely on the content of this Preamble to determine that this File is or is not a DICOM File.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_505f8cd9-a865-48ee-b2a9-eed58188fb4e">DICOM Prefix</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_6ac2ebf1-e2f5-42cf-b01b-a29ed244bedc">
<emphasis role="italic">No Tag or Length Fields</emphasis>
</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_58352c33-ead1-4309-a7d6-904b0e2b6ac2">1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_864b9c42-a030-4f0f-bcde-f128bce4aafc">Four bytes containing the character string "DICM". This Prefix is intended to be used to recognize that this File is or not a DICOM File.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_7e68c698-758f-4fcd-84f3-2ab9632bddd0">File Meta Information Group Length</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_a01ca80c-061b-4d36-ab52-c335838a1105">(0002,0000)</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_d3d07cbd-a96a-4764-bc4c-b63c4a96a138">1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_40687f14-99dd-47b6-a34d-4dfd254ad5d0">Number of bytes following this File Meta Element (end of the Value field) up to and including the last File Meta Element of the Group 2 File Meta Information</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_9ea02631-3fda-45c9-9a0c-bf311deb4658">File Meta Information Version</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_360ca3cb-6caa-43aa-8315-74d60f9212c9">(0002,0001)</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_4672be18-ba9e-4f36-8349-3782cfa2b9a6">1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_33cec1f1-1563-4402-a705-189c0739bc8a">This is a two byte field where each bit identifies a version of this File Meta Information header. In version 1 the first byte value is 00H and the second value byte value is 01H.</para>
              <para xml:id="para_bd93357c-9377-452a-a162-bc7182f3ca4a">Implementations reading Files with Meta Information where this attribute has bit 0 (lsb) of the second byte set to 1 may interpret the File Meta Information as specified in this version of PS3.10. All other bits shall not be checked.</para>
              <note>
                <para xml:id="para_f471b440-2abf-4cc3-b196-2e2239561e4b">A bit field where each bit identifies a version, allows explicit indication of the support of multiple previous versions. Future versions of the File Meta Information that can be read by version 1 readers will have bit 0 of the second byte set to 1</para>
              </note>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_13189a44-2b7a-4c61-91b2-afa93c5a68b2">Media Storage SOP Class UID</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_541c2ee8-83cd-41af-aa54-617f665ab75e">(0002,0002)</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_799e1113-02ca-46ee-8248-aca5022643fe">1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_46844727-a0af-4c28-803e-f7d1156adc3d">Uniquely identifies the SOP Class associated with the Data Set. SOP Class UIDs allowed for media storage are specified in <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/> - Media Storage Application Profiles.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_6e564061-c441-47e5-a034-e5ade6a37df5">Media Storage SOP Instance UID</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_0bef00e3-fdfb-4e4a-9b67-19d1ecc6b204">(0002,0003)</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_4fa2e8fe-d1c5-4ee6-8d80-3a07d1810034">1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_b79f80aa-3f6f-47e6-8d83-f7bd22566c4c">Uniquely identifies the SOP Instance associated with the Data Set placed in the file and following the File Meta Information.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_a556ae11-eddd-4b3b-b26b-741322329558">Transfer Syntax UID</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_e184f920-0b35-4c57-bcd1-9c58d1ff4c23">(0002,0010)</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_f76107cc-3414-48b6-9a6e-c4b8f0a0662e">1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_219cc4ae-ec90-4ada-9138-f9765e0095b7">Uniquely identifies the Transfer Syntax used to encode the following Data Set. This Transfer Syntax does not apply to the File Meta Information.</para>
              <note>
                <para xml:id="para_5ada98ac-8d37-4bec-87d5-4593e0ca3a36">It is recommended to use one of the DICOM Transfer Syntaxes supporting explicit Value Representation encoding to facilitate interpretation of File Meta Element Values. JPIP Referenced Pixel Data Transfer Syntaxes are not used (see <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>).</para>
              </note>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_2206bc13-be26-44e5-8d0b-4fc3c44cdaf7">Implementation Class UID</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_b009987b-a658-462c-b1d2-766db2d02213">(0002,0012)</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_e68c1e75-2472-40aa-953c-5f06cf2688f8">1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_f618c01c-380a-4106-ae51-bd96c5ef47d8">Uniquely identifies the implementation that wrote this file and its content. It provides an unambiguous identification of the type of implementation that last wrote the file in the event of interchange problems. It follows the same policies as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> (association negotiation).</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_1fcadecb-9895-42d3-a0e8-3a7b15ae3c11">Implementation Version Name</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_ba152258-2fd2-41ba-a258-69fc43c86e2a">(0002,0013)</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_c9cb015b-f303-438c-b910-0b67d2fb4daa">3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_cfe608d4-7ea2-47ea-88d9-c24b4f07ac14">Identifies a version for an Implementation Class UID (0002,0012) using up to 16 characters of the repertoire identified in <xref linkend="sect_8.5" xrefstyle="select: label"/>. It follows the same policies as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> (association negotiation).</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_38e767b0-dc2d-45a5-ac7a-16eb9b311684">Source Application Entity Title</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_434afc6f-550d-459b-888e-ac3fc5c2e194">(0002,0016)</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_9a6830ac-21dc-46a6-99dc-1d0ee101f6dc">3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_77ff131c-a0a1-4400-961e-55ce9df54b2e">The DICOM Application Entity (AE) Title of the AE that wrote this file's content (or last updated it). If used, it allows the tracing of the source of errors in the event of media interchange problems. The policies associated with AE Titles are the same as those defined in <olink targetdoc="PS3.8" targetptr="PS3.8" xrefstyle="select: labelnumber"/>.</para>
              <note>
<para xml:id="para_7bc0bfa5-b241-4653-943f-47ed465fdaa0">If the data set was created de novo by the application writing the file, its AE Title, if it has one, may be used. If the data set was received over the network, there is potential ambiguity as to whether the value is the same as Sending Application Entity Title (0002,0017) or Receiving Application Entity Title (0002,0018) or some other value.</para>
</note>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_629bcf20-7422-418c-bcfa-bcb7d8c56dcc">Sending Application Entity Title</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_f7f441cb-7cec-4f70-b39f-35922b128310">(0002,0017)</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_7122df75-bcf0-4a9e-a798-02abbad76e89">3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_7d19704f-4a61-4206-a73f-9d54006dbc5a">The DICOM Application Entity (AE) Title of the AE that sent this file's content over a network.</para>
              <note>
<para xml:id="para_70f92a9d-5f85-4fe2-af0d-3f8c4234e65c">This is the AE that was the sender (source) of the content (the data set), in the case of a data set sent over the network (i.e., the Calling AET of the SCU for a C-STORE operation). If the data set was instead created de novo by the application writing the file, it should not be present.</para>
</note>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_338f87cc-fa4d-47be-9629-8b352dc2b7e9">Receiving Application Entity Title</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_fed2ad89-6088-47c4-9ea4-c6958806c256">(0002,0018)</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_c349f5c3-3de7-4749-a8ee-9c43900669e9">3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_0f90227a-d348-4186-aa9d-04f33d60cf1e">The DICOM Application Entity (AE) Title of the AE that received this file's content over a network.</para>
              <note>
<para xml:id="para_1e7670d8-1009-4032-899f-78fc71dc1898">This is the AE that was the recipient (destination) of the content (the data set), in the case of a data set received over the network (i.e., the Called AET of the SCP for a C-STORE operation). If the data set was instead created de novo by the application writing the file, it should not be present.</para>
</note>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_c3eb0e4a-53af-4704-9417-20ff2552eed1">Private Information Creator UID</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_e60b8dc8-555e-496f-abeb-a3151d6c3d62">(0002,0100)</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_054aa912-7c5d-4091-ab8d-c5dbe075c50e">3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_1c5f6ac1-a43b-42eb-b2f6-530d55918d13">The UID of the creator of the private information (0002,0102).</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_04a5aa2c-d487-4f1c-8906-20cf4f964bff">Private Information</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_73ede04a-2aab-49cb-b1f6-eecde6e32e7e">(0002,0102)</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_23f5c7b0-45e2-4037-8b44-f74443e580ca">1C</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_267148a3-410e-4f76-aba9-cc89fff549f0">Contains Private Information placed in the File Meta Information. The creator shall be identified in (0002,0100). Required if Private Information Creator UID (0002,0100) is present.</para>
            </td>
          </tr>
        </tbody>
      </table>
      <para xml:id="para_30c3d0e1-5179-42cb-b61a-3b59e6cfa5dd">Except for the 128 byte preamble and the 4 byte prefix, the File Meta Information shall be encoded using the Explicit VR Little Endian Transfer Syntax (UID=1.2.840.10008.1.2.1) as defined in DICOM <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>. Values of each File Meta Element shall be padded when necessary to achieve an even length, as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> by their corresponding Value Representation. The Unknown (UN) Value Representation shall not be used in the File Meta Information. For compatibility with future versions of this Standard, any Tag (0002,xxxx) not defined in <xref linkend="table_7.1-1" xrefstyle="select: label"/> shall be ignored.</para>
      <para xml:id="para_c820193f-7a41-4470-a0f4-98b88433b403">Values of all Tags (0002,xxxx) are reserved for use by this Standard and later versions of DICOM. Data Elements with a group of 0002 shall not be used in data sets other than within the File Meta Information.</para>
      <note>
        <para xml:id="para_51694a2b-6e02-4730-b0f1-c2707e7fe5e2">
<olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> specifies that Elements with Tags (0001,xxxx), (0003,xxxx), (0005,xxxx), and (0007,xxxx) shall not be used.</para>
      </note>
    </section>
    <section label="7.2" status="2" xml:id="sect_7.2">
      <title>Data Set Encapsulation</title>
      <para xml:id="para_0d59ad47-409d-4502-8763-8a5f234ab583">Each File shall contain a single Data Set representing a single SOP Instance related to a single SOP Class (and corresponding IOD).</para>
      <note>
        <para xml:id="para_0664f98f-b279-4f7f-8753-3c36be100a07">A file may contain more than a single 2D image frame as specific IODs may be defined to include multiple frames.</para>
      </note>
      <para xml:id="para_25589dd5-ac28-41f0-8966-583c1429ee2c">The Transfer Syntax used to encode the Data Set shall be the one identified by the Transfer Syntax UID of the DICOM File Meta Information.</para>
      <note>
        <orderedlist>
          <listitem>
            <para xml:id="para_be382397-41dd-49c7-bef4-d069b7c1197b">The Transfer Syntax used to encode the Data Set cannot be changed within the Data Set; i.e., the Transfer Syntax UID Data Element may not occur anywhere within the Data Set, e.g., nested within a Sequence Item.</para>
          </listitem>
          <listitem>
            <para xml:id="para_8a32f798-28e5-4413-8c84-4ff4135c084f">A DICOM Data Set does not include its total length. The end of the file indication provided by the DICOM File Service (see <xref linkend="sect_8.4" xrefstyle="select: label"/>) is the only indication of the end of the Data Set.</para>
          </listitem>
        </orderedlist>
      </note>
      <para xml:id="para_132fe5c6-593d-46f5-8de5-fbaef583227c">The last Data Element of a Data Set may be Data Element (FFFC,FFFC) if padding of a Data Set is desired when a file is written. The Value of this Data Set Trailing Padding Data Element (FFFC,FFFC) has no significance and shall be ignored by all DICOM implementations reading this Data Set. File-set Readers or Updaters shall be able to process this Data Set Trailing Padding (FFFC,FFFC) either in the Data Set following the Meta Information or in Data Sets nested in a Sequence (see <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>).</para>
    </section>
    <section label="7.3" status="2" xml:id="sect_7.3">
      <title>Support of File Management Information</title>
      <para xml:id="para_13b284b6-f8f9-4302-bc0f-9888b2553ae7">The DICOM File Format does not include file management information in order to avoid duplication with functions related to the Media Format Layer. If necessary for a given DICOM Application Profile, the following information should be offered by the Media Format Layer:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_3eac0a64-53cf-48ca-bc64-71853c48619a">File content owner identification;</para>
        </listitem>
        <listitem>
          <para xml:id="para_0d789ad6-aa2d-4989-a592-3056998c1ee5">File access statistics (e.g., date and time of creation);</para>
        </listitem>
        <listitem>
          <para xml:id="para_6b8bbff9-b74d-4a30-b0ef-17d83ec1b23d">Application file access control;</para>
        </listitem>
        <listitem>
          <para xml:id="para_71053cf9-0a19-4512-a289-b1df4add2c63">Physical media access control (e.g., write protect).</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="7.4" status="2" xml:id="sect_7.4">
      <title>Secure DICOM File Format</title>
      <para xml:id="para_798791cd-6f8e-443b-a737-fbfeb3f234cb">A Secure DICOM File shall contain a single DICOM File encapsulated with the Cryptographic Message Syntax as defined in RFC3369. Depending on the cryptographic algorithms used for encapsulation, a Secure DICOM File can provide one or more the following security properties:</para>
      <itemizedlist>
        <listitem>
          <para xml:id="para_60814adf-647c-4acd-b489-1d3f40cd620c">Data Confidentiality (by means of encryption)</para>
        </listitem>
        <listitem>
          <para xml:id="para_544776c4-172e-4ee6-81fb-297542736222">Data Origin Authentication (by means of certificates and digital signatures)</para>
        </listitem>
        <listitem>
          <para xml:id="para_0cd5ad3f-71f4-4a7e-bcfc-36b13c71ef53">Data Integrity (by means of digital signatures)</para>
        </listitem>
      </itemizedlist>
      <para xml:id="para_e4a0aa88-9c96-4b7e-a6e3-febf70b3bd02">In addition, a Secure DICOM File offers the possibility to communicate encryption keys and certificates to the intended recipients by means of key transport, key agreement or symmetric key-encryption key schemes.</para>
    </section>
  </chapter>
  <chapter label="8" status="1" xml:id="chapter_8">
    <title>DICOM File Service</title>
    <para xml:id="para_fc469d53-6329-4b8e-a3f8-8e44dc59f66a">The DICOM File Service specifies an abstract view of files from the point of view of a service user in the Data Format Layer. Constraining access to the content of files by Application Entities through such a DICOM File Service ensures independence of the Data Format Layer functions from specific Media Format and Physical Media selections.</para>
    <note>
      <para xml:id="para_7d24fe3f-bdab-468c-849e-1e5ca4e056b6">This DICOM File Service definition is abstract in the sense that it is only the specification of a boundary. Its focus is limited to the aspects directly related to the access to the data structures of the Media Format Layer (not the specifications of the data structures themselves). Even though the DICOM File Service may be described by means of a number of abstract primitives such as read, write, delete, etc., it is not intended to be the definition of an Application Programming Interface (API).</para>
    </note>
    <para xml:id="para_854405fa-df5d-440f-b16e-c263926ccc57">The DICOM File Service specified for Media Storage offers a basic service, simple enough to be supported by a wide range of commonly available Media Format (or file systems), but rich enough to provide the key functions to effectively manage files and access their content. The following sections specify the minimum mandatory requirements that shall be met by any physical media and associated media format to comply with the DICOM Media Storage model.</para>
    <note>
      <para xml:id="para_e68b3c53-96a6-46b1-9af2-7f947f02adfd">It is acceptable that a specific Media Format offers more file services than those specified in the DICOM File Service. Such services may be internal to an implementation (i.e., not visible through the data structures on the Storage Media). Their usage is beyond the scope of the DICOM Standard. However, in cases where such services are reflected in the file structures of the Media format Layer or in the Data Set encoding an Information Object, the extension of such services in a manner that jeopardizes interoperability should not be done (e.g., File IDs longer than specified in the DICOM File Service).</para>
    </note>
    <section label="8.1" status="2" xml:id="sect_8.1">
      <title>File-set</title>
      <para xml:id="para_12d45b05-f5f0-4616-97cb-b34a784f8c2f">The DICOM File Service offers the ability to create and access one or more files in a File-set. A File-set is a collection of files that share a common naming space within which File IDs (see <xref linkend="sect_8.2" xrefstyle="select: label"/>) are unique. No semantics is attached to the order of Files within a File-set.</para>
      <note>
        <orderedlist>
          <listitem>
            <para xml:id="para_a7c0830f-820a-4afb-ae4d-eeacb23a906f">The DICOM File Service does not require that Files within a File-set be simultaneously accessible (e.g., sequentially accessed media such as tapes are supported).</para>
          </listitem>
          <listitem>
            <para xml:id="para_ba5adb05-4a27-4982-9c89-4135718fc3fa">The DICOM File Service does not explicitly include the notion of distributing a File-set or a File across multiple "volumes/physical medium". However the transparent support by the Media Format Layer of such a feature is not precluded.</para>
          </listitem>
        </orderedlist>
      </note>
      <para xml:id="para_a9a9647a-03d5-4131-a51a-c671aa4726bf">A File ID naming space (corresponding to a File-set) shall be associated with an appropriate feature of a Media Format defined structure. This mapping shall be specified in <olink targetdoc="PS3.12" targetptr="PS3.12" xrefstyle="select: labelnumber"/> for each Media Format specification (this is integral to the specification of the relationship between any specific Media Format services and the DICOM File Services defined in this part).</para>
      <note>
        <para xml:id="para_e3190aeb-651f-47be-8ca3-5d6d115e5a42">An example of such a relationship is to map the File ID naming space to a volume in a personal computer Media Format or a partition in a workstation File System on a removable medium. Another example is to map the File ID naming space to a directory and its tree of sub-directories. In this case it could offer the possibility of supporting multiple File-sets (one per directory) on the same physical medium. Each File-set would have its own DICOMDIR File. To ensure interoperability, <olink targetdoc="PS3.12" targetptr="PS3.12" xrefstyle="select: labelnumber"/> shall specify these specific mapping rules between the directories and the File ID naming space of a File-set (including the rules to unambiguously locate the DICOMDIR File).</para>
      </note>
      <para xml:id="para_3ca21e55-2591-4406-a547-5aca7708fad2">A single File with the File ID DICOMDIR shall be included in each File-set.</para>
      <para xml:id="para_2022dd75-4ea3-464f-a90b-16da3284f243">Each File-set shall be uniquely identified by a File-set UID that shall be registered according to the UID registration rules specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>. When Files are added or removed from a File-set, the File-set UID shall not change.</para>
      <para xml:id="para_aec64f81-e373-457b-86f2-72a3a2e34d1d">A File-set may also be identified by a File-set ID, which provides a simple (but possibly not globally unique) human readable reference. A File-set ID is string of zero (0) to sixteen (16) characters from the subset of the G0 repertoire of ISO 8859 (see <xref linkend="sect_8.5" xrefstyle="select: label"/>). A File-set ID may be associated or mapped to an appropriate identifier at the Media Format Layer.</para>
      <note>
        <orderedlist>
          <listitem>
            <para xml:id="para_70b31dd7-f003-41f3-bfe8-ee623e93d687">Continuing with the personal computer Media Format example used first in the previous note, a File-set ID may be defined to be identical to a volume label.</para>
          </listitem>
          <listitem>
            <para xml:id="para_68cccd65-b10d-4208-989b-506e422d2f7f">Non-DICOM Files (Files with a content not formatted according to the requirements of this Part of the DICOM Standard) may be present in a File-set. Such files should not contain the DICOM File Meta Information specified in <xref linkend="table_7.1-1" xrefstyle="select: label"/> and may not be referenced by the DICOM Media Storage Directory (see <xref linkend="sect_8.6" xrefstyle="select: label"/>).</para>
          </listitem>
        </orderedlist>
      </note>
      <para xml:id="para_7dec4d84-c3d2-4285-83bb-58f472ba21a1">A File-set Descriptor File (a "readme" file) may also be attached to a File-set. See <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> for a detailed specification of the Basic Directory IOD.</para>
    </section>
    <section label="8.2" status="2" xml:id="sect_8.2">
      <title>File IDs</title>
      <para xml:id="para_e4876515-830f-4c98-8b2f-4fb778a892b2">Files are identified by a File ID that is unique within the context of a File-set. A File ID is an ordered sequence of File ID Components. A File ID may contain one to eight components. Each Component is a string of one to eight characters from a subset of the G0 repertoire of ISO 8859 (see <xref linkend="sect_8.5" xrefstyle="select: label"/>)</para>
      <para xml:id="para_515f2b7a-7da6-4560-9b88-d149a14782ba">Such a structure for File IDs (a sequence of components) allows the DICOM File Service to organize file selection in a hierarchical mode. No conventions are defined by the DICOM Standard for the use of the structure of File IDs components and their content (except for the reserved File ID DICOMDIR, see <xref linkend="sect_8.6" xrefstyle="select: label"/>). Furthermore, no semantics shall be conveyed by the structure and content of such File IDs. This implies that when a File ID is assigned to any File in a File-set, the creating DICOM Application Entity may choose to structure the File ID as it wishes. Any other AE reading existing files or creating new files shall not be required to know any semantics the original creator may have associated with such a structure.</para>
      <para xml:id="para_2b9c0ede-e367-4b69-8760-cb1d3c091801">The File ID used to access a File through the abstract DICOM File Service is not necessarily the sole file identifier. The interchange Media Format (file system) may allow multiple file names to address the same physical file. Any use of alternate file names is beyond the scope of the DICOM Standard.</para>
      <note>
        <orderedlist>
          <listitem>
            <para xml:id="para_b1f85555-6ed2-44c9-b719-dfa9d8a95fe9">A DICOM File ID is equivalent to the commonly used concept of "path name" concatenated with a "file name". An example of a valid DICOM File ID with four components shown separated by backslashes is:SUBDIR1\SUBDIR2\SUBDIR3\ABCDEFGH</para>
          </listitem>
          <listitem>
            <para xml:id="para_4145edd6-c056-4993-8226-aa01cf9bad97">As specified in the DICOM Storage Media Model, no semantics is attached to File ID content and structure as it relates to the DICOM Information Objects stored in these files. If used, the hierarchical structure simply provides a means to organize the Files of a File-set and facilitate their selection.</para>
          </listitem>
          <listitem>
            <para xml:id="para_735905e1-a81e-4a61-ba8b-d66f6d8ee85d">The DICOM File Service does not specify any "separator" between the Components of the File ID. This is a Value Representation issue that may be addressed in a specific manner by each Media Format Layer. In DICOM IODs, File ID Components are generally handled as multiple Values and separated by "backslashes". There is no requirement that Media Format Layers use this separator.</para>
          </listitem>
          <listitem>
            <para xml:id="para_e3c78549-61f9-4591-9758-45ff1316ace4">DICOM files stored on interchange media may have an alternate file name or link that uses less restricted file names, such as a filename extension (e.g., ".dcm" in accordance with RFC3240).</para>
          </listitem>
        </orderedlist>
      </note>
    </section>
    <section label="8.3" status="2" xml:id="sect_8.3">
      <title>File Management Roles and Services</title>
      <para xml:id="para_822b3d7e-7a03-45f1-89d4-112f3caeb180">When DICOM Application Entities participate in the exchange of information by the interchange of Storage Media, they perform through the DICOM File Service a number of Media Storage Services:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_261e464f-ac3a-49d1-850f-08e11f86acbc">M-WRITE, to create new files in a File-set and assign them a File ID;</para>
        </listitem>
        <listitem>
          <para xml:id="para_79c19021-c754-4fa9-9c0f-2bb6d9836a62">M-READ to read existing files based on their File ID;</para>
        </listitem>
        <listitem>
          <para xml:id="para_fbca05c2-34cb-4ac8-870a-e212053ff821">M-DELETE to delete existing files based on their File ID;</para>
        </listitem>
        <listitem>
          <para xml:id="para_4ee86094-d617-435b-975b-64e8f768be56">M-INQUIRE FILE-SET to inquire free space available for creating new files within the File-set;</para>
        </listitem>
        <listitem>
          <para xml:id="para_33fe75b6-ab60-4927-aca2-79239d2aafb5">M-INQUIRE FILE to inquire date and time of file creation (or last update if applicable) for any file within the File-set.</para>
        </listitem>
      </orderedlist>
      <para xml:id="para_7c941347-06a9-4aa1-a472-bfeeaef48d9a">A DICOM Application Entity may take one or more of the following three roles:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_0be1723a-9b6e-4afd-b408-cd740ef37179">File-set Creator (FSC). Such an Application Entity, exercises this role by means of M-WRITE Operations to create the DICOMDIR File (see <xref linkend="sect_8.6" xrefstyle="select: label"/>) and zero or more DICOM Files;</para>
        </listitem>
        <listitem>
          <para xml:id="para_3b15e411-226c-4c9e-b1d5-50d870d48b2d">File-set Reader (FSR). Such an Application Entity, exercises this role by means of M-READ Operations to access one or more Files in a File-set. A File-set Reader shall not modify any of the files of the File-set (including the DICOMDIR File);</para>
        </listitem>
        <listitem>
          <para xml:id="para_445c564f-0bf5-4e3b-be6c-c1de32f88bc2">File-set Updater (FSU). Such an Application Entity, exercises this role by means of M-READ, M-WRITE, and M-DELETE Operations. It reads, but shall not modify, the content of any of the DICOM files in a File-set except for the DICOMDIR File. It may create additional Files by means of an M-WRITE or delete existing Files in a File-set by means of an M-DELETE.</para>
        </listitem>
      </orderedlist>
      <note>
        <para xml:id="para_266abf1e-d013-489f-8944-2247fa7a63bc">Although a File-set Updater (FSU) may include the functions corresponding to a File-set Creator (FSC) and a File-set Reader (FSR), it is not required that implementations supporting an FSU role also support an FSC or an FSR role..</para>
      </note>
      <para xml:id="para_f9c42d57-114d-4b02-a6b9-f306c9b16380">The use of the concept of roles in DICOM Conformance Statements will result in a more precise expression of the capabilities of implementations supporting DICOM Media Storage. Conforming implementations shall support one of the following choices:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_7541305b-e1bf-4154-9af0-8e781f362cf3">File-set Creator,</para>
        </listitem>
        <listitem>
          <para xml:id="para_051aac4d-f8b1-4a76-9d3b-9ce52fd0cffa">File-set Reader,</para>
        </listitem>
        <listitem>
          <para xml:id="para_66695cdd-ac70-4e17-9953-51e61ca74fb9">File-set Creator and File-set Reader,</para>
        </listitem>
        <listitem>
          <para xml:id="para_3b428b97-ea44-4476-ad12-dd914483939f">File-set Updater,</para>
        </listitem>
        <listitem>
          <para xml:id="para_70bd5fd6-83c3-4aa6-81aa-98a22e9ed262">File-set Updater and File-set Creator,</para>
        </listitem>
        <listitem>
          <para xml:id="para_76ed3b71-0b03-4ba5-9562-6aaf85670c53">File-set Updater and File-set Reader,</para>
        </listitem>
        <listitem>
          <para xml:id="para_aa2a58ea-fe7e-4e51-8390-596437b720cd">File-set Updater, File-set Creator and File-set Reader.</para>
        </listitem>
      </orderedlist>
      <para xml:id="para_2204c82f-5244-45d0-90e1-85f6faf8b5d0">Based on the roles supported by a DICOM Application Entity, the DICOM File Service shall support the Media Operations defined in <xref linkend="table_8.3-1" xrefstyle="select: label"/>.</para>
      <table frame="box" label="8.3-1" rules="all" xml:id="table_8.3-1">
        <caption>Media Operations and Roles</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_acf43f1b-5f6b-465a-9c31-b485240e9e32">Media Operations Roles</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_2ddee323-ccf9-4fe0-9c3f-3b6a2b6a0f4e">M-WRITE</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_7427fe45-3617-4f9d-bb2f-ae1ed20c1f1d">M-READ</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_d7697e4f-7d3e-43d6-945c-4996615ece5d">M-DELETE</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_4f942014-d476-4a64-a327-98a9c7c8aa79">M-INQUIRE FILE-SET</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_c61b8804-d16d-4ab3-b1e0-3ce2e0718beb">M-INQUIRE FILE</para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_d5d5db3c-70a2-482f-8500-8413e24cec9d">FSC</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_ca9fb657-e26a-4e0e-bdc1-9e5793d96b1f">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_2c69175b-a68c-4ab9-9b5f-2ba03c2278b6">
                <emphasis role="italic">Not required</emphasis>
              </para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_421aec8e-b053-4266-952e-e69fe1146716">
                <emphasis role="italic">Not required</emphasis>
              </para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_fa700ffa-7434-40bc-9a5b-3310d46320fb">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_0ca571d1-9c84-49c5-965e-712d13aa90ea">
                <emphasis role="italic">Not required</emphasis>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_f5c2196a-5c05-4f74-a687-53a1a6dfec78">FSR</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_6f5e07d0-3e91-4110-8809-6d0d23263c2c">
                <emphasis role="italic">Not required</emphasis>
              </para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_039fb3d7-8df6-405b-b8e4-81fe4d07e2e6">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_2ba33009-beb4-4e7b-ae35-5a11d9e715cc">
                <emphasis role="italic">Not required</emphasis>
              </para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_e5e220ac-62b2-46ca-a44b-54a46ee072e3">
                <emphasis role="italic">Not required</emphasis>
              </para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_e9118527-da37-4813-96c0-8f79f5685c80">Mandatory</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_69d67286-0217-4905-934f-2156e7b43c35">FSC+FSR</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_e639d245-a05f-4122-a42e-42965490f0e9">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_1edd0d97-ab0f-440c-b51e-177e7b297d17">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_3113914d-18e0-4458-983d-910822e164a7">
                <emphasis role="italic">Not required</emphasis>
              </para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_5214d444-d6a5-405c-a0b8-16b7260d1fdb">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_02225da0-d9f0-4158-932a-6c811e43e21e">Mandatory</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_fca52f34-09f0-495f-ba3f-fee75b95ac6e">FSU</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_60988b32-76d4-48f4-94de-54dd05a35243">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_fce4c7c8-2099-4ae8-803d-5100ec575229">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_33c2df96-5f58-473f-addf-f41616e3fa66">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_a4289ed8-dad7-4529-aa66-36e28c7dc06e">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_ffd518ba-3ded-4bb0-b124-bf8ef39ffd13">Mandatory</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_21bc5025-69f8-431f-9075-81e1ec2cc7b9">FSU+FSC</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_52aa6bce-73d8-4e07-b6f0-1bc14c98e197">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_11880c91-29b3-47c5-84cd-3ddb443045b0">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_1da35373-de0d-42a8-9598-ca0f6d3f1e81">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_c46e0a0a-4ab9-40ce-adfb-7a76ec4808bb">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_daca8935-e23b-455b-ae5e-206f1dc87b3c">Mandatory</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_e1e5612a-3b8a-4ced-94f7-ab83ab894d4a">FSU+FSR</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_e6dac645-0901-4730-bd91-d2839bcd6275">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_e59d5a67-0d20-4a85-8113-89d648aadd38">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_de00025e-6449-43fa-aa08-7479de23b8e7">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_490cb34d-ec60-4b68-bdde-a4b2216da1d4">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_40234da9-c00c-4be1-acb5-150e2ec7fb3a">Mandatory</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_a601bed8-5ef3-4b15-a64f-fb5f30f87d50">FSU+FSC+FSR</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_ec4468fb-61eb-483c-88f3-b6255e9a8742">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_6ab05148-722f-420e-8134-22e98e2636af">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_1b109744-7665-4c43-8e03-a6d79363660e">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_31df8422-9911-4325-b85f-37cdddb66d2d">Mandatory</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para xml:id="para_b902473f-3ce1-45d2-8108-5b7e2c25d83d">Mandatory</para>
            </td>
          </tr>
        </tbody>
      </table>
      <note>
        <orderedlist>
          <listitem>
            <para xml:id="para_8622cb3e-8c57-4f05-aeb6-0c8442477214">Media Preparation is outside the scope of this Part of the DICOM Standard. However it is assumed to be performed by the FS Creator.</para>
          </listitem>
          <listitem>
            <para xml:id="para_b64d14dd-fea0-4d3b-8daa-3838220d6b43">The DICOM File Service does not require that file update capabilities (e.g., append) be supported by every Media Format Definition selected. The non-support of such file update capabilities to the DICOMDIR File may simply result in having to delete and create a new file in order to keep the directory information consistent.</para>
          </listitem>
          <listitem>
            <para xml:id="para_b8541e0c-50bd-4330-a349-34a50d28577a">If the content of a file needs to be updated or changed by an FSU, it is considered by this Part of the DICOM Standard as an M-DELETE Operation followed by an M-WRITE Operation. The FSU is responsible for ensuring the internal consistency of the File and its conformance to PS3.10 and the specific SOP Class stored, exactly as if the FSU was creating a new File. In particular, if an FSU implementation needs to update the file content but is not able to recognize and fully process the content of the File Preamble (see <xref linkend="sect_7.1" xrefstyle="select: label"/>), it may consider setting the first four bytes of the Preamble to "DICM" followed by 124 bytes to 00H. This would avoid introducing inconsistencies between the content of the File Preamble and the remainder of the file content. An example of this situation may occur when a TIFF IFD 0 Offset in the File Preamble points at a further TIFF IFD embedded in the DICOM Data Set, and the update operation changes the location of this embedded TIFF IFD.</para>
          </listitem>
        </orderedlist>
      </note>
    </section>
    <section label="8.4" status="2" xml:id="sect_8.4">
      <title>File Content Access</title>
      <para xml:id="para_c5168fa4-6e00-4198-b27d-413d648a990a">The DICOM File Service offers the ability to access the content of any File of a File-set. The File content is an ordered string of zero or more bytes, where the first byte is at the beginning of the file and the last byte at the end of the File.</para>
      <note>
        <para xml:id="para_ca53bca8-a308-4b21-928d-de4d5bce2b0f">This File content definition as an ordered string of bytes is related to the view provided at the DICOM File Service level. It may not correspond to the physical ordering of bytes of data on a specific medium.</para>
      </note>
      <para xml:id="para_48adcc25-282e-4c91-9e57-071c62f5080d">The DICOM File Service shall manage the delimitation of the end of the File by ensuring the user of the File Service that read access beyond the last byte will be detected and reported to the DICOM File Service user. This delimitation function is performed by the Media Format Layer.</para>
      <para xml:id="para_f729d2aa-be9b-4cdf-ab17-d3960be057f9">The DICOM File Service shall offer the ability:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_5d1220d3-336b-4b05-bdd2-1d647a7fb2c2">for an FSR or FSU to perform an M-READ to read zero or more bytes of the content of a File;</para>
        </listitem>
        <listitem>
          <para xml:id="para_dc62c1d3-da8e-4d66-8aa5-ac3bbcbba197">for an FSC or FSU to perform an M-WRITE to write one or more bytes making the content of a File.</para>
        </listitem>
      </orderedlist>
      <note>
        <para xml:id="para_b3d84a54-6019-4259-ac4e-b94953357ce8">The DICOM File Service does not require any specific capability for the selective read access or write access of the content of a file (e.g., seek or append). However it does not restrict specific Media Format definitions to support such features.</para>
      </note>
    </section>
    <section label="8.5" status="2" xml:id="sect_8.5">
      <title>Character Set</title>
      <para xml:id="para_a998457c-eb74-4238-9b03-93e4d1e4475b">File IDs and File-set IDs shall be character strings made of characters from a subset of the G0 repertoire of ISO 8859. The following characters form this subset:</para>
      <para xml:id="para_a4b14ff7-2c3b-4b04-9760-a4be131eb05e">A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z (uppercase)</para>
      <para xml:id="para_d634306f-6cd3-4775-9bf0-a2f64b9f2a79">1, 2, 3, 4, 5, 6, 7, 8, 9, 0 and _ (underscore)</para>
      <note>
        <orderedlist>
          <listitem>
            <para xml:id="para_75afab31-1ae8-4dd8-b859-32fd4f03304e">This is the character set defined for Control Strings (Value Representation CS - see <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>) except that SPACE is not included.</para>
          </listitem>
          <listitem>
            <para xml:id="para_bf0c7e14-0411-43ef-bfcd-35742854c925">This character set is selected to limit characters in File IDs and File-set IDs to those that do not conflict with reserved characters and delimiters in the file systems defined in <olink targetdoc="PS3.12" targetptr="PS3.12" xrefstyle="select: labelnumber"/>. Component delimiters or other required demarcations defined in <olink targetdoc="PS3.12" targetptr="PS3.12" xrefstyle="select: labelnumber"/> are not part of File IDs or File-set IDs</para>
          </listitem>
        </orderedlist>
      </note>
    </section>
    <section label="8.6" status="2" xml:id="sect_8.6">
      <title>Reserved DICOMDIR File ID</title>
      <para xml:id="para_f3ad6025-8a8a-4948-a839-71458a1755e9">A single File with a File ID, DICOMDIR, shall exist as a member of every File-set. This File ID is made of a single Component (see <xref linkend="sect_8.2" xrefstyle="select: label"/> for the File ID structure). It contains the DICOM Media Storage Directory (see <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> for detailed specification of the Basic Directory IOD), which includes general information about the whole File-set. This general information is always present, but optionally the directory content may be left empty in environments where it would not be needed. If the DICOMDIR File does not exist in a File-set, the File-set does not conform to PS3.10. The DICOMDIR shall not reference Files outside of the File-set to which it belongs.</para>
      <note>
        <orderedlist>
          <listitem>
            <para xml:id="para_c97965bf-2a26-43b6-9b05-f67447ef40d4">An example of the content of the DICOMDIR File may be found in <xref linkend="chapter_A" xrefstyle="template:Annex %n"/>.</para>
          </listitem>
          <listitem>
            <para xml:id="para_02dc5860-b56e-435b-a48e-50fb3aa1aff4">If one chooses to map the origin of a File-set to a specific directory node in a specific Media Format, the File IDs, including the DICOMDIR File IDs, would be relative to this directory node path name.</para>
          </listitem>
        </orderedlist>
      </note>
      <para xml:id="para_c6e76e65-5694-4b79-8521-12a429e7d10e">The DICOMDIR File shall use the Explicit VR Little Endian Transfer Syntax (UID=1.2.840.10008.1.2.1) to encode the Media Storage Directory SOP Class. The DICOMDIR File shall comply with the DICOM File Format specified in Section 7 of this Standard. In particular the:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_049578a3-3145-4dc2-90c1-33c8b5f1b41e">SOP Class UID in the File Meta Information (header of the DICOMDIR File) shall have the Value specified in <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/> of this Standard for the Media Storage Directory SOP Class;</para>
        </listitem>
        <listitem>
          <para xml:id="para_59a843a8-0f2b-4a7c-b090-627337a411db">SOP Instance UID in the File Meta Information (header of the DICOMDIR File) shall contain the File-set UID Value. The File-set UID is assigned by the Application Entity that created the File-set (FSC role, see <xref linkend="sect_8.3" xrefstyle="select: label"/>) with zero or more DICOM Files. This File-set UID Value shall not be changed by any other Application Entities reading or updating the content of the File-set.</para>
        </listitem>
      </orderedlist>
      <note>
        <orderedlist>
          <listitem>
            <para xml:id="para_58972c26-a978-4a52-b6df-f242fa350bb1">This policy reflects that a File-set is an abstraction of a "container" within which Files may be created or read. The File-set UID is related to the "container" not its content. A File-set in the DICOM File Service is intended to be mapped to a supporting feature of a selected Media Format (e.g., volume or partition).</para>
          </listitem>
          <listitem>
            <para xml:id="para_e88daff6-d219-4533-9f25-bde999dcdca3">The Standard does not prevent the making of duplicate copies of a File-set (i.e., a File-set with the same File-set UID). However, within a managed domain of File-sets, a domain specific policy may be used to prevent the creation of such duplicate File-sets.</para>
          </listitem>
        </orderedlist>
      </note>
    </section>
  </chapter>
  <chapter label="9" status="1" xml:id="chapter_9">
    <title>Conformance Requirements</title>
    <para xml:id="para_20f04c7e-9656-4eae-8c5a-24cce5d9ac90">An implementation of PS3.10 shall:</para>
    <orderedlist numeration="loweralpha">
      <listitem>
        <para xml:id="para_0ab1ce12-c73e-4fe8-bcf5-699acafeaba0">have a Conformance Statement based on a <olink targetdoc="PS3.11" targetptr="PS3.11" xrefstyle="select: labelnumber"/> Application Profile in accordance with the framework defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>;</para>
      </listitem>
      <listitem>
        <para xml:id="para_d7cbc386-7c33-462b-bb77-42834702b172">meet the requirements of the DICOM File Format as specified in <xref linkend="chapter_7" xrefstyle="template:Section %n"/>;</para>
      </listitem>
      <listitem>
        <para xml:id="para_6246dcca-3d36-4d89-93c5-153124d49c77">support the DICOM File Service as specified in <xref linkend="chapter_8" xrefstyle="template:Section %n"/>, in one or more of the roles identified in <xref linkend="sect_8.3" xrefstyle="select: label"/>;</para>
      </listitem>
      <listitem>
        <para xml:id="para_5ec4e5ac-51e6-4be2-8d4e-b8b8a23742d2">perform the Media Operations defined in <xref linkend="table_8.3-1" xrefstyle="select: label"/> according to the role supported;</para>
      </listitem>
      <listitem>
        <para xml:id="para_a89d2e1c-92db-4f9c-affc-6133198ae84e">support the DICOMDIR File with a content as specified in the Media Storage Directory SOP Class in <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/>.</para>
      </listitem>
    </orderedlist>
  </chapter>
  <chapter label="A" status="1" xml:id="chapter_A">
    <title>Example of DICOMDIR File Content (Informative)</title>
    <para xml:id="para_a1a93b29-6c9a-42f3-a513-0258b4e075e0">This Annex provides an example of a File content that is based on selected aspects of the example introduced in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> for the Basic Directory Information Object. This is not a normative Annex. It is only an illustration, which is simply intended to help the reader better understand the organization of a DICOM Directory stored in a DICOMDIR File.</para>
    <section label="A.1" status="2" xml:id="sect_A.1">
      <title>Simple Directory Content Example</title>
      <para xml:id="para_645fe723-6750-49db-9e07-f37f7dbb7a68">
<xref linkend="table_A.1-1" xrefstyle="select: label"/> shows in a simplified manner, the content of a simple DICOMDIR File. Values of elements are noted between square brackets (e.g., [1.2.840.10008.34.7.6]). Byte Offsets are shown by symbolic Values noted between brackets (e.g., {1493}).</para>
      <table frame="box" label="A.1-1" rules="all" xml:id="table_A.1-1">
        <caption>Directory Content Example</caption>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="3"/>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_f18af11d-d217-4f29-9f6e-f23bf6a4115d">
                <emphasis role="bold">Meta-Info</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_2f5fed76-5148-43dd-b9bf-1075f649530a">128 bytes</para>
              <para xml:id="para_6df4e244-afac-4cc2-8957-2cee879fd4b3">4 bytes</para>
              <para xml:id="para_54bb4351-7ad2-4440-94ec-ea5e7d5d7f3a">0002,0000</para>
              <para xml:id="para_1002b691-dae3-412e-9633-44d7bfc26712">0002,0001</para>
              <para xml:id="para_73e107ad-f58e-417f-8905-570f974d1eab">0002,0002</para>
              <para xml:id="para_908a4bc8-1122-49af-ac09-6b8859c00aa3">0002,0003</para>
              <para xml:id="para_a96ebbbb-60c0-449a-8ccf-88bc284ef7da">0002,0010</para>
              <para xml:id="para_b72c676e-6d8b-4b24-877d-ecb23ed872c3">0002,0012</para>
              <para xml:id="para_c43ff9f1-0811-4cca-a5f8-ed1e2f1c59e2">...</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_cd2dfda0-291e-425d-9af4-5dc1a2139f0c">File Preamble <emphasis role="bold">[all bytes set to 00H]</emphasis>
</para>
              <para xml:id="para_66463394-a3e4-4c20-bf91-faf8f462fa20">DICOM Prefix <emphasis role="bold">[DICM]</emphasis>
</para>
              <para xml:id="para_4a66aa39-2588-4f6f-982e-9961a0544df6">Group Length</para>
              <para xml:id="para_92f47c54-8f64-44fa-b105-6d72060152bc">File Meta-Information Version <emphasis role="bold">[0001]</emphasis>
</para>
              <para xml:id="para_06e03c92-ec3e-4b75-bbbf-4729e3d54f59">SOP Class UID <emphasis role="bold">[1.2.840.10008.1.3.10]</emphasis>
</para>
              <para xml:id="para_ceeea93a-7b7a-48d4-b801-871499e0759c">SOP Instance UID <emphasis role="bold">[1.2.840.23856.36.45.3]</emphasis>
</para>
              <para xml:id="para_0ab44a79-cf75-4541-b1b7-30ebda7c4376">Transfer Syntax UID <emphasis role="bold">[1.2.840.10008.1.1]</emphasis>
</para>
              <para xml:id="para_34a1d25b-07fb-4cba-9160-9d895bbc5cb1">Implementation Class UID <emphasis role="bold">[1.2.840.23856.34.90.3]</emphasis>
</para>
              <para xml:id="para_4b0d5d85-1f97-43ca-8489-32831a747d0b">...</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_8d177db2-5fe9-4c5b-a898-24a63aeebb43">File-set Identification</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_09b1502b-5bef-45ce-813d-dca068c13312">0004,1130</para>
              <para xml:id="para_2bf28df9-9ef4-473b-8b4b-733907c92e46">...</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_7be661b7-77c4-42ca-801b-2b8251ccfc92">File-set ID <emphasis role="bold">[EXAMPLE]</emphasis>...</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_94ed5b0d-fe66-4c18-ba3a-ab2d99e83b59">General Directory Information</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_c4e33232-5456-4279-bd0f-dcaaa488bf70">0004,1200</para>
              <para xml:id="para_d7d43a3a-e2ef-44f6-ae38-f102c3848df1">0004,1202</para>
              <para xml:id="para_7d3d5446-4c57-4ad8-87f2-c8ee4b157a19">0004,1212</para>
              <para xml:id="para_5a4c6343-f37d-4e92-9d6f-e8ea6d874acb">...</para>
              <para xml:id="para_4fa9a27a-d797-4268-9046-71d533bd19cb">0004,1220</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_662acc56-fd70-46fa-8a52-80e0f5aad894">Offset of First Record of Root Directory Entity <emphasis role="bold">{1829}</emphasis>
</para>
              <para xml:id="para_b3fe313e-9a31-407a-a616-cdec72a0aa22">Offset of Last Record of Root Directory Entity <emphasis role="bold">{6F18}</emphasis>
</para>
              <para xml:id="para_723b6167-6de2-4b9f-84aa-081785c3d689">File-set Consistency Flag <emphasis role="bold">[0000H]</emphasis>
</para>
              <para xml:id="para_8fd88c4e-e521-4745-9b84-8f74860eb434">...</para>
              <para xml:id="para_37eff203-6a7e-4efb-822f-fbbdffcdb71a">Directory Record Sequence.</para>
              <para xml:id="para_1341589f-9b23-442d-bded-dccb3da12261">This Data Element Value includes the following Sequence of Items.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="5">
              <para xml:id="para_448c0f88-f03e-4ae6-9daf-bdf42df0eb29">
                <emphasis role="bold">{1829}</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_adb88211-25a5-460b-b86c-95c8b457d4a0">
                <emphasis role="bold">Item Tag</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_c43074e2-6509-4ab3-a570-53414a19d916">FFFE,E000</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_72840148-6b19-4dc3-a7a3-2238940f4d12">Item Data Element (includes the following Data Elements)</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="2">
              <para xml:id="para_5a36ee9f-e434-433a-b946-5c54b77089c3">
<emphasis role="bold">Study 1</emphasis>
</para>
              <para xml:id="para_8f06e1c6-d185-4485-a038-cc021c60232a">Directory Record</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_5842a1d5-0fa3-4570-a21b-ae95d71af808">0004,1400</para>
              <para xml:id="para_ecc34fd0-cff0-4c65-a0a5-66fe0fb736cc">0004,1410</para>
              <para xml:id="para_bff0df99-7a43-4bc5-bafc-d6f8dc49888f">0004,1420</para>
              <para xml:id="para_c2672c1e-7e6c-42f9-a823-c708ed1f364e">...</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_506d97ae-4b5c-4550-8443-0fc627353319">Offset of the next Dir. Record in Dir. Entity (not shown in example)</para>
              <para xml:id="para_191de2f7-e22f-41c1-a569-95ff997773e0">Record In-use Flag <emphasis role="bold">[FFFFH]</emphasis>
</para>
              <para xml:id="para_7dd57a3d-7f90-4b2a-83b2-2a88c4cbb467">Offset of Referenced Lower Level Directory Entity <emphasis role="bold">{2299}</emphasis>
</para>
              <para xml:id="para_2745028e-66cb-4818-b6d0-b4894c737e28">...</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_54f51a64-b22c-4de3-b9fb-27b056c9c21d">0004,1430</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_b8300904-bd28-4d4c-a4f9-5d63ac3aadeb">Directory Record Type <emphasis role="bold">[STUDY]</emphasis>
</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_81d00111-b74b-4c35-9c3a-76a6954864ed">
                <emphasis role="italic">Selection Keys</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_f0908a6a-71ce-4c44-bcc8-89ec5570d8f3">0020,000D</para>
              <para xml:id="para_ca499750-1970-4d35-86a0-3f5198226222">0020,0010</para>
              <para xml:id="para_29e8c851-35d2-4bec-a320-c8aad219734d">...</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_cf56235e-a7c7-416b-b7ba-306975521823">Study Instance UID <emphasis role="bold">[1.2.840.4656.23.4568745]</emphasis>
</para>
              <para xml:id="para_ff39d8c1-b90a-4801-b4a9-9a4dcad91a38">Study ID <emphasis role="bold">[srt78UJ]</emphasis>
</para>
              <para xml:id="para_9ae33c2e-6364-4a28-9742-c4265b40f6e6">....</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_a5d949c8-568e-4225-bd6f-ef1d5faf9fca">Item Del. Tag</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_e96b7337-8a2a-44e6-82b7-7470c3898f55">FFFE,E00D</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_f2d6332a-eb03-4750-8f5f-d0d9d29ec41d">Item Delimitation Tag is present only if Item is of undefined length</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="4">
              <para xml:id="para_74991779-1e0f-4f0e-80c9-874ebfded242">
                <emphasis role="bold">{2299}</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_fb7cdd90-f700-4986-94e4-9c115eba37da">
                <emphasis role="bold">Item Tag</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_0b004e7a-9978-4253-93e3-40fba9bd7ee6">FFFE,E000</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_21132989-5eac-403b-9c6a-b4e770bcd1ba">Item Data Element (includes the following Data Elements)</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="2">
              <para xml:id="para_2c678101-5475-45f8-8621-a1e042cb0452">
<emphasis role="bold">Series 1</emphasis>
</para>
              <para xml:id="para_2deaeba8-9533-4aaf-83f9-d96c3c6b62c7">Directory Record</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_abedf822-b8ad-428a-9182-70888e889feb">0004,1400</para>
              <para xml:id="para_2b1c66bc-a091-4bd7-a4ce-5b49df0b2e9b">0004,1410</para>
              <para xml:id="para_b1b9ec55-6e0f-4f64-bd31-3e2f3fae461c">0004,1420</para>
              <para xml:id="para_7d8c4dc8-a27c-444a-8d2e-1335a2cf5e68">...</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_5fbb259e-03e0-49fc-b0c4-cd8c015ff80a">Offset of the next Dir. Record in Dir. Entity (not shown in example)</para>
              <para xml:id="para_fc5d4a47-e5c8-4584-a7e4-2323a8025768">Record In-use Flag <emphasis role="bold">[0FFFFH]</emphasis>
</para>
              <para xml:id="para_49b7f677-0f30-426e-985c-30953fa038eb">Offset of Referenced Lower Level Directory Entity <emphasis role="bold">{2681}</emphasis>
</para>
              <para xml:id="para_4759064b-ce02-4062-bbad-3a4f0f393fc2">...</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_40d58063-16fd-453e-911e-58f95d8831c1">0004,1430</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_73ab07a9-4009-4c68-9814-255d556e437c">Directory Record Type <emphasis role="bold">[SERIES]</emphasis>
</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_5d091784-e619-4e90-8c60-56c9529a6fcb">
                <emphasis role="italic">Selection Keys</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_962fbf7c-a5ed-4272-bea3-2fb5877e9bad">0008,0060</para>
              <para xml:id="para_22b7709c-9d5d-4e46-be4c-0e749f86fe73">0020,0011</para>
              <para xml:id="para_4a5b6a30-e98e-48df-8215-113492031295">...</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_604e4707-3fe2-4624-aced-de089c10b02c">Modality <emphasis role="bold">[NM]</emphasis>
</para>
              <para xml:id="para_08a4f20d-5812-429a-a71a-4d749b71a8bb">Series Number <emphasis role="bold">[2]</emphasis>
</para>
              <para xml:id="para_54e0e727-546c-49a9-82ba-50a80b0e8237">...</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1"/>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_de8647a7-e423-4633-a338-b1e7c051c972">Item Del. Tag</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_8e185efe-1ef5-4568-b583-5c90f33541f6">FFFE,E00D</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_b621173a-985d-47fb-aaa1-d200596f76c4">Item Delimitation Tag is present only if Item is of undefined length</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="6">
              <para xml:id="para_f2b390f1-52a6-44c5-a3d7-7b6dedf493ab">
                <emphasis role="bold">{2681}</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_aac74b71-ecce-4fff-9f73-d28d66fe5e44">
                <emphasis role="bold">Item Tag</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_327bacac-5fbb-499a-ae57-0140f7a27d32">FFFE,E000</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_d0b13327-a738-4e9b-b41a-242aaa5418ae">Item Data Element (includes the following Data Elements)</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="3">
              <para xml:id="para_faf2ade6-096b-43b9-a9b3-030ea0c41e55">
<emphasis role="bold">Image 1</emphasis>
</para>
              <para xml:id="para_f982057d-792e-4d6c-bf88-4a59bf679bec">Directory Record</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_c731b174-ada0-4b05-a32c-13e6cda3330f">0004,1400</para>
              <para xml:id="para_06e9723a-fcc9-4da7-bccd-b4abe017c886">0004,1410</para>
              <para xml:id="para_03c705bd-0fe6-4561-91da-6c3f8403cabf">0004,1420</para>
              <para xml:id="para_cf4a3eb4-dc15-4e05-a59c-3d721179a6b8">...</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_f38f071b-4319-41c9-b205-bd19de45537e">Offset of the next Dir. Record in Dir. Entity <emphasis role="bold">{3419}</emphasis>
</para>
              <para xml:id="para_cf677b6d-821b-418f-a681-724e2432cde9">Record In-use Flag <emphasis role="bold">[FFFFH]</emphasis>
</para>
              <para xml:id="para_fca8df47-207b-4b15-a60a-305e0981de28">Offset of Referenced Lower Level Directory Entity <emphasis role="bold">[00000000H]</emphasis>
</para>
              <para xml:id="para_ecec1195-1a40-46ab-bf13-6e8fe774f902">...</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_e3a2043c-b550-4e9a-b0b3-4add8d72aad2">0004,1430</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_3f1a99c1-9676-4e28-88d0-d55ce775960b">Directory Record Type <emphasis role="bold">[IMAGE]</emphasis>
</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_b5cac1a6-517c-4865-9e0e-619fec28aa92">0004,1500</para>
              <para xml:id="para_48086bd1-5231-4a30-996f-fc9dd82989d0">0004,1510</para>
              <para xml:id="para_5ae39b24-41ad-417b-be07-3a78f3bd7bde">0004,1511</para>
              <para xml:id="para_28ee54aa-66e7-42fd-b724-e8169d49503f">0004,1512</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_1959e7c0-d7b3-48fd-b5a6-3db5a6d8ca7a">Referenced File ID <emphasis role="bold">[DIR\TDRI\3856G3]</emphasis>
</para>
              <para xml:id="para_c0d45f60-01db-4af7-9756-ccabff8ac029">Referenced SOP Class UID in File <emphasis role="bold">[1.2.840.10008.5.1.4.1.1.5]</emphasis>
</para>
              <para xml:id="para_1e42f183-14c0-4b3e-8768-37df0a827513">Referenced SOP Instance UID in File <emphasis role="bold">[1.2.840.34.56.78999654.234]</emphasis>
</para>
              <para xml:id="para_8ad599bc-92bb-45ce-aeb9-66ab1fe75919">Referenced Transfer Syntax UID in File <emphasis role="bold">[1.2.840.10008.1.2.1]</emphasis>
</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_436479a5-6122-46e7-9a1e-30b62d7d1439">
                <emphasis role="italic">Selection Keys</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_782a481a-9b39-4c5e-bf0f-b87ccc43a34e">0008,0018</para>
              <para xml:id="para_66ac1955-d953-4c0b-b6c3-916b7bbb6301">0020,0013</para>
              <para xml:id="para_2f748307-8868-4f5c-8186-c6693fca69a0">...</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_4a4ec46a-8446-4aae-88a8-1b1278efe803">Image SOP Instance UID <emphasis role="bold">[1.2.840.34.56.78999654.234]</emphasis>
</para>
              <para xml:id="para_b503a25c-1a8d-48cf-83f3-70394b48e0b0">Image Number <emphasis role="bold">[1]</emphasis>
</para>
              <para xml:id="para_36651ead-9238-434d-8f6b-484a0493c6a1">...</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_d893d373-03ee-475b-a695-bde1acd183ad">Item Del. Tag</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_345cab00-0f05-4448-bf72-5ecea19b47af">FFFE,E00D</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_c385b28c-3b76-4bde-aca7-ceee605cfab3">Item Delimitation Tag is present only if Item is of undefined length</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="6">
              <para xml:id="para_e79c0e40-46b8-4fbf-9bc5-8aa9511769a8">
                <emphasis role="bold">{3419}</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_992b3473-3a2a-46b5-b5ee-48826e64428a">
                <emphasis role="bold">Item Tag</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_8ddda97d-558d-4341-b53d-990deea7e03a">FFFE,E000</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_28a5dfe1-56cc-40b6-a7e5-7ff0942147fa">Item Data Element (includes the following Data Elements)</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="3">
              <para xml:id="para_22aee02f-e882-47ec-bc92-5d8ae1fb04d8">
<emphasis role="bold">Image 2</emphasis>
</para>
              <para xml:id="para_942ca2d9-5a93-4172-af08-ad83240eb1e2">Directory Record</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_4c6ba231-e155-4178-8814-6af2501c1ff5">0004,1400</para>
              <para xml:id="para_8bfb2d21-bd55-424b-9952-e3aa09b327bd">0004,1410</para>
              <para xml:id="para_dcbf08df-1ab8-4448-9224-7c0a4422a81b">0004,1420</para>
              <para xml:id="para_c147b753-751c-4d3b-8631-485da66cd4b9">...</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_ce1d9776-6fad-4f9f-8d67-2ca76fd2071a">Offset of the next Dir. Record in Dir. Entity (not shown in example)</para>
              <para xml:id="para_dd21f362-b38c-42fb-a3c0-f40ef07728e2">Record In-use Flag <emphasis role="bold">[FFFFH]</emphasis>
</para>
              <para xml:id="para_07fd5d0a-1d51-4f4d-9f41-a30f2d0419d3">Offset of Referenced Lower Level Directory Entity <emphasis role="bold">[00000000H]</emphasis>...</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_59caaf60-0011-48f7-83ff-13fe491e3308">0004,1430</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_f13ba487-e36e-42ac-b3ec-3f1b34de79e8">Directory Record Type <emphasis role="bold">[IMAGE]</emphasis>
</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_7f131121-808e-4a54-acf7-8b4d084c9a13">0004,1500</para>
              <para xml:id="para_4c350848-5e46-4409-abed-bce551730413">0004,1510</para>
              <para xml:id="para_c0963e96-9130-4e3b-8226-c6cf21e8e25b">0004,1511</para>
              <para xml:id="para_e0ae60c9-d559-4d64-ade4-6d3ec0843245">0004,1512</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_1d286aa3-4b39-45e5-b2a8-a16bcb895226">Referenced File ID <emphasis role="bold">[DIR\TDRI\3856G7]</emphasis>
</para>
              <para xml:id="para_34fb65e5-06d2-46a6-951a-fa6cbcb7e99d">Referenced SOP Class UID in File <emphasis role="bold">[1.2.840.10008.5.1.4.1.1.5]</emphasis>
</para>
              <para xml:id="para_647a73dd-1934-4881-ad6e-43664ee83a02">Referenced SOP Instance UID in File <emphasis role="bold">[1.2.840.34.56.78999654.235]</emphasis>
</para>
              <para xml:id="para_68351451-8678-4629-bccb-c1f14a16366f">Referenced Transfer Syntax UID in File <emphasis role="bold">[1.2.840.10008.1.2.2]</emphasis>
</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_084e6d73-7005-4d94-a641-b4e790a5f880">
                <emphasis role="italic">Selection Keys</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_1e2ad306-71ca-4b3e-9360-e2b4ce2af133">0008,0018</para>
              <para xml:id="para_f2bbded3-7055-4650-b380-65e86edbd75c">0020,0013</para>
              <para xml:id="para_0fe0a42f-0012-481a-b455-2f2201ca911e">...</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_d634f029-6beb-4732-9545-c096796ebc28">Image SOP Instance UID <emphasis role="bold">[1.2.840.34.56.78999654.235]</emphasis>
</para>
              <para xml:id="para_f9ec65a5-086a-4be7-bda0-7b19748b8e86">Image Number <emphasis role="bold">[2]</emphasis>
</para>
              <para xml:id="para_d9a5cc6a-c03c-472c-bbf3-cc3712108137">...</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_8cd12861-f885-4da3-bf1e-8eaf5ff17f48">Item Del. Tag</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_6ecd8951-5684-4d2e-9f05-9ca47cd47704">FFFE,E00D</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_fcbc894b-2d51-4400-ab64-f22fbb51ccbe">Item Delimitation Tag is present only if Item is of undefined length</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="4">
              <para xml:id="para_b13b699c-4323-417e-a10d-4619ad49d28b">
                <emphasis role="bold">{6F18}</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_ffde1361-32e3-46be-89a7-6a63e049c9ba">
                <emphasis role="bold">Item Tag</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_d4991734-937a-4c63-af34-241cd2acb4e4">FFFE,E000</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_e5915be8-5f16-4276-8b72-b9b5c643c030">Item Data Element (includes the following Data Elements)</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_d6c24bcd-d8be-40fe-9756-b82b620178c9">
<emphasis role="bold">Patient C</emphasis>
</para>
              <para xml:id="para_3605e340-c517-4c2b-8e08-02ec03d2269d">Directory Record</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_e9a3ea8f-b52a-4719-af18-707ca184e18c">0004,1400</para>
              <para xml:id="para_7d700e29-6766-49a6-abe8-ca7d7af3a016">0004,1410</para>
              <para xml:id="para_a92b4639-efe8-465a-bc8c-dc52adadb4ba">0004,1430</para>
              <para xml:id="para_c59eb6ca-4da3-4952-b67e-a827e8161c11">...</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_6e7a9963-83ea-4fa4-bd08-3ac941161532">Offset of the next Dir. Record in Dir. Entity <emphasis role="bold">{00000000H}</emphasis>
</para>
              <para xml:id="para_07a2b613-0f47-420d-8739-bef3842f5b95">Record In-use Flag <emphasis role="bold">[FFFFH]</emphasis>
</para>
              <para xml:id="para_48ad67ce-8ba5-4f5c-84f6-6ec89ff2347e">Directory Record Type <emphasis role="bold">[PATIENT]</emphasis>
</para>
              <para xml:id="para_bb38ac16-d8e8-44c8-b235-6c1c72ac1dca">...</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_0e74b616-a6f6-4bcb-b613-c715f669cb5e">
                <emphasis role="italic">Selection Keys</emphasis>
              </para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_084c3bcf-743c-4b98-ac2f-8d267a565b53">0010,0010</para>
              <para xml:id="para_757bc140-00e9-4844-a88b-20a1031e194a">0010,0020</para>
              <para xml:id="para_7c98cfcd-8661-46df-8d70-88404dbc9af1">....</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_eeae2697-a84c-4da2-a23d-e7c2b96ffc7d">Patient Name <emphasis role="bold">[Patient C]</emphasis>
</para>
              <para xml:id="para_93ee3d5b-34ba-4a70-bdd3-858bd945fbca">Patient ID <emphasis role="bold">[523-61-8765]</emphasis>
</para>
              <para xml:id="para_0d3afe0e-c7cb-4e65-8536-c39de1e7ab33">....</para>
            </td>
          </tr>
          <tr valign="top">
            
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_e63ad0fe-6f0b-48b2-a8ab-68e6778e8bf9">Item Del. Tag</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_b87e4b04-5443-4918-a80c-48492a91ae3a">FFFE,E00D</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_90ae9951-3f0e-4af5-963d-b11e60874632">Item Delimitation Tag is present only if Item is of undefined length</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1"/>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_10926e2f-1aef-41cd-a7a8-06a777ceedd3">Sequence Delimitation Tag</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_d361579c-7693-4502-859f-7b3e4fe9a004">FFFE,E0DD</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_5a2ced5e-5381-4b9f-a034-07a02651199a">Used only if the Directory Record Sequence (0004,1220) is of undefined length to delimit the end of the Value of the Directory Record Sequence Data Element.</para>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
    <section label="A.2" status="2" xml:id="sect_A.2">
      <title>Example of DICOMDIR File Content With Multiple Referenced Files</title>
      <para xml:id="para_39c5b98f-f59f-4c5b-999e-72c8b16fae73">This section was previously defined in DICOM. It is now retired. See PS3.3-1998.</para>
    </section>
  </chapter>
  <chapter label="B" status="1" xml:id="chapter_B">
    <title>HL7 Structured Document Files</title>
    <para xml:id="para_d09fcd28-7c53-41fd-910f-acdfd269b539">Structured Documents as defined by an HL7 standard may be stored on DICOM Interchange Media, and may be referenced from within DICOM SOP Instances (including the DICOMDIR Media Storage Directory). There are two alternatives for storage of such documents - they may be encapsulated in DICOM SOP Instances, or they may be stored as native HL7 objects (unencapsulated),</para>
    <para xml:id="para_74aeb243-f9b2-4c22-90d8-cd1d4cd4449d">An Encapsulated CDA is referenced from the Media Storage Directory like any other DICOM SOP Instance.</para>
    <para xml:id="para_c3493caf-5123-4dad-9d52-6d93f44c84ce">References to a native (unencapsulated) Structured Document use a SOP Class UID, identifying the document class, and a SOP Instance UID. The SOP Instance UID is arbitrary, and the native document instance identifier is encoded in the HL7 Instance Identifier (0040,E001) attribute (see <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>, "HL7 Structured Document Directory Record Definition" and "HL7 Structured Document Reference Sequence" for further information).</para>
    <note>
      <orderedlist>
        <listitem>
          <para xml:id="para_8437f895-396d-43fa-b211-3831885a7231">The HL7 standards that define such documents include the Clinical Document Architecture (CDA), Structured Product Labeling (SPL), and Structured Clinical Trial Protocol (SCTP) standards.</para>
        </listitem>
        <listitem>
          <para xml:id="para_99d89b3d-18d7-4412-9fa7-b41119b50013">The SOP Instance UID used to reference a particular HL7 Structured Document is not necessarily the same in all DICOM Instances. E.g., an SR Document and a DICOMDIR, both stored on the same media, may
            <emphasis role="italic">internally</emphasis> use different SOP Instance UIDs to reference the same HL7 Structured Document, but they will each provide a mapping to the same HL7 Instance Identifier as the
            <emphasis role="italic">external</emphasis> identifier.</para>
        </listitem>
        <listitem>
          <para xml:id="para_e1e9c0b9-d084-465c-896c-8409bec9bffd">It is recommended that an HL7 Structured Document that can be associated with a patient and study be encapsulated in a DICOM SOP Instance, and that the SOP Instance UID of that encapsulation be used consistently for all references.</para>
        </listitem>
      </orderedlist>
    </note>
    <para xml:id="para_b769b282-8692-4bcf-b2dd-6b2dfaba79ec">An HL7 Structured Document is an aggregate multimedia object, consisting of a base XML-encoded document, plus zero or more multimedia components (e.g., graphics) that are considered an integral part of the object. The multimedia components may be encoded in-line in the XML document, or they may be referenced external objects.</para>
    <para xml:id="para_07576d08-d9ba-4b8f-85f6-9c3bfa229cc5">Such a document stored on DICOM Interchange Media shall be encoded as either:</para>
    <itemizedlist>
      <listitem>
        <para xml:id="para_d2340592-3e8c-4087-b110-3e2e68e011e9">an XML document with any multimedia components encoded in-line, and stored in a single file. The file shall be stored on the media with a File ID as defined for DICOM files. There shall be no preamble or header in the file prior to the XML content. For the purpose of identifying the Transfer Syntax of such a stored file from the DICOMDIR, the Transfer Syntax UID "1.2.840.10008.1.2.6.2" is specified for an XML encoded document.</para>
      </listitem>
      <listitem>
        <para xml:id="para_6de5b624-b435-4b8e-b72f-bf444281d3cb">a Multipart MIME package, as described in RFC2557 "MIME Encapsulation of Aggregate Documents, such as HTML (MHTML) " (http://www.ietf.org/rfc/rfc2557.txt). A single package shall be stored in a single file, and shall encapsulate a single HL7 Structured Document and its referenced multimedia. The file shall be stored on the media with a File ID as defined for DICOM files. There shall be no preamble or header in the file prior to the MIME headers. For the purpose of identifying the Transfer Syntax of such a stored file from the DICOMDIR, the Transfer Syntax UID "1.2.840.10008.1.2.6.1" is specified for RFC2557 MIME Encapsulation.</para>
      </listitem>
    </itemizedlist>
    <note>
      <para xml:id="para_1f9af0ef-1dba-417d-bef9-5521820cac9d">The File ID, consistent with DICOM file naming rules, is limited to eight characters with no extension, in a directory structure where each directory is limited to an eight character name. There may also be alternate file identifiers (e.g., links) to those files that use less restricted file names (see <xref linkend="sect_8.2" xrefstyle="select: label"/>).</para>
    </note>
    <para xml:id="para_97316db2-c564-4951-a16e-d14b26c77089">Any multimedia component that is included by reference in multiple HL7 Structured Documents stored on the same media shall be replicated into each referencing document MIME package.</para>
  </chapter>
</book>
